# 🧪 Phase 1 통합 테스트 가이드

## 📋 테스트 개요

Phase 1의 모든 기능을 검증하기 위한 통합 테스트 시스템입니다.

### 테스트 대상
- ✅ Phase 1-A: 채팅 UI 및 기초 시스템
- ✅ Phase 1-B: 에피소드 트리거 시스템
- ✅ Phase 1-C: 멀티 캐릭터 동시 채팅
- ✅ Phase 1-D: 통합 테스트 및 버그 수정

---

## 🚀 테스트 실행 방법

### 1. 자동 테스트
```bash
# 테스트 페이지 접속
https://chatgame-seven.vercel.app/test/integration-test.html

# 또는 로컬 실행
# test/integration-test.html 파일 열기
```

### 2. 전체 테스트 실행
1. "▶️ 전체 테스트 실행" 버튼 클릭
2. 10개 시나리오가 자동으로 순차 실행됨
3. 진행률 바에서 실시간 진행 상황 확인
4. 콘솔 창에서 상세 로그 확인

### 3. 개별 시나리오 테스트
- 각 시나리오 카드 내부에서 개별 실행 가능
- 특정 기능만 집중 테스트 시 유용

---

## 📝 테스트 시나리오 목록

### 시나리오 1: 단일 캐릭터 기본 플로우
**목적**: 한 명의 캐릭터와 처음부터 끝까지 대화
**검증 항목**:
- 대화방 생성
- 메시지 송수신
- 호감도 변화
- localStorage 저장

**테스트 순서**:
1. character-list-ui.html 접속
2. 캐릭터 선택 (윤아 INFP)
3. 첫 메시지 수신 확인
4. 선택지 선택 및 호감도 변화 확인
5. 직접 메시지 입력
6. 대화방 목록 복귀
7. 대화방 정보 정확성 확인

---

### 시나리오 2: 멀티 캐릭터 동시 진행
**목적**: 3명의 캐릭터와 독립적으로 대화
**검증 항목**:
- 캐릭터별 독립 상태 관리
- 각 캐릭터의 호감도 분리
- 대화 히스토리 독립성

**테스트 순서**:
1. 윤아와 대화 (호감도 5)
2. 미나와 대화 (호감도 3)
3. 서연과 대화 (호감도 2)
4. 대화방 목록에서 3명 모두 확인
5. 각 대화방 재진입 후 히스토리 확인

---

### 시나리오 3: 시간 기반 트리거 테스트
**목적**: 시간대별 자동 메시지 발송
**검증 항목**:
- 아침/점심/저녁/밤 메시지 발송
- 하루 1회 제한 작동
- 마지막 발송 시간 저장

**테스트 순서**:
1. 윤아와 대화 시작
2. 시간대별 메시지 확인 (8시, 12시, 19시, 23시)
3. 중복 발송 방지 확인

---

### 시나리오 4: 호감도 기반 트리거 테스트
**목적**: 호감도 레벨업 시 특별 메시지
**검증 항목**:
- 레벨업 메시지 정확한 발송
- 특별 이벤트 발생 (호감도 5, 7, 10)
- 톤 레벨 자동 변화

**테스트 순서**:
1. 호감도 1→2 증가 시 메시지 확인
2. 호감도 4→5 증가 시 고백 이벤트
3. 호감도 9→10 증가 시 최종 고백

---

### 시나리오 5: 행동 기반 트리거 테스트
**목적**: 유저 무응답 시 감정 변화
**검증 항목**:
- 3시간, 6시간, 24시간, 3일 기준 메시지
- 감정 상태 변화 (worried → sad → angry)
- 호감도 감소 (-2, -5)

**테스트 순서**:
1. 윤아와 대화 중
2. 3시간 무응답 → "오빠 바빠?"
3. 24시간 무응답 → 호감도 -2
4. 3일 무응답 → 대화 중단

---

### 시나리오 6: 랜덤 이벤트 트리거 테스트
**목적**: 예측 불가능한 메시지 발송
**검증 항목**:
- 호감도에 따른 확률 변화
- 다양한 이벤트 타입
- 10분마다 체크 작동

---

### 시나리오 7: localStorage 저장/로드
**목적**: 데이터 영구 저장 및 복구
**검증 항목**:
- 새로고침 후 완전 복구
- 용량 5MB 이하
- 데이터 무결성 보장

**테스트 순서**:
1. 3명의 캐릭터와 대화 진행
2. 페이지 새로고침 (F5)
3. 대화방 리스트 및 히스토리 확인
4. localStorage 용량 측정

---

### 시나리오 8: UI/UX 종합 테스트
**목적**: 사용자 경험 및 인터페이스
**검증 항목**:
- 부드러운 스크롤
- 타이핑 애니메이션
- 읽지 않은 메시지 배지
- 모바일 반응형 디자인 (375px)

---

### 시나리오 9: 성능 테스트
**목적**: 시스템 성능 및 최적화
**검증 항목**:
- 로딩 속도 2초 이내
- 메모리 사용량 50MB 이하
- 트리거 엔진 안정성
- AI 응답 3초 이내

---

### 시나리오 10: 에러 처리 테스트
**목적**: 예외 상황 안정성
**검증 항목**:
- AI API 오류 시 폴백 응답
- localStorage 용량 초과 시 자동 정리
- 잘못된 URL 파라미터 처리
- 네트워크 끊김 시 데이터 유지

---

## ✅ 테스트 통과 기준

### 필수 통과 기준
- ✅ 10개 시나리오 중 9개 이상 통과 (90%)
- ✅ 크리티컬 버그 0개
- ✅ localStorage 데이터 손실 없음
- ✅ 모바일 화면 정상 작동

### 품질 기준
- ✅ 로딩 속도: 2초 이내
- ✅ 메모리 사용량: 50MB 이하
- ✅ 애니메이션: 60fps 유지
- ✅ AI 응답: 3초 이내

---

## 🐛 알려진 이슈 및 해결 방법

### Issue #1: AI API 타임아웃
**증상**: 3초 이상 응답 없음
**해결**: 폴백 응답 자동 생성

### Issue #2: localStorage 용량 초과
**증상**: 5MB 초과 시 저장 실패
**해결**: 오래된 히스토리 자동 삭제 (최근 50개만 유지)

### Issue #3: 시간 포맷 오류
**증상**: 미래 시간 표시 "0분 전"
**해결**: 음수 방지 로직 추가

---

## 📊 테스트 결과 분석

### 결과 내보내기
1. "📥 결과 내보내기" 버튼 클릭
2. `test-results-{timestamp}.json` 파일 다운로드
3. 결과 분석 및 리포트 작성

### 결과 형식
```json
{
  "timestamp": "2025-10-04T...",
  "summary": {
    "total": 10,
    "passed": 9,
    "failed": 1,
    "skipped": 0
  },
  "scenarios": [
    {
      "id": "scenario_1",
      "name": "단일 캐릭터 기본 플로우",
      "status": "통과 ✓"
    }
  ]
}
```

---

## 🔧 디버깅 가이드

### 콘솔 로그 확인
- 브라우저 F12 → Console 탭
- 상세한 에러 메시지 및 스택 트레이스 확인

### localStorage 확인
```javascript
// 브라우저 콘솔에서 실행
localStorage.getItem('chatgame_chat_rooms');
localStorage.getItem('chatgame_multi_character_states');
```

### 네트워크 확인
- F12 → Network 탭
- API 호출 성공/실패 확인
- 응답 시간 측정

---

## 📌 다음 단계

### Phase 2 준비
- Phase 1 테스트 100% 통과
- 발견된 버그 모두 수정
- 성능 최적화 완료
- 문서화 완료

### Phase 2 목표
- 대화 톤 변화 시스템
- 사진 전송 시스템
- 먼저 연락 시스템

---

**테스트 문의**: GitHub Issues 또는 dosik@chatgame.com
