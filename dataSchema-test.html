<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°ì´í„° ìŠ¤í‚¤ë§ˆ í…ŒìŠ¤íŠ¸ - Phase 1.2</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: #f9f9f9;
        }

        .test-section h3 {
            margin-top: 0;
            color: #555;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: all 0.3s;
        }

        .button:hover {
            background: #45a049;
            transform: translateY(-2px);
        }

        .button.primary { background: #2196F3; }
        .button.primary:hover { background: #1976D2; }
        
        .button.warning { background: #ff9800; }
        .button.warning:hover { background: #f57c00; }
        
        .button.danger { background: #f44336; }
        .button.danger:hover { background: #da190b; }

        .output {
            background: #000;
            color: #00ff00;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            font-size: 14px;
        }

        .schema-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .schema-card {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .schema-card h4 {
            margin: 0 0 10px 0;
        }

        .schema-card .value {
            font-size: 1.5em;
            font-weight: bold;
        }

        .data-display {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-success { background: #4CAF50; }
        .status-warning { background: #ff9800; }
        .status-error { background: #f44336; }

        .validation-result {
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
        }

        .validation-success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .validation-error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .progress-bar {
            background: #e0e0e0;
            border-radius: 10px;
            height: 20px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4CAF50, #45a049);
            height: 100%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ—ƒï¸ ë°ì´í„° ìŠ¤í‚¤ë§ˆ ëª¨ë“ˆ í…ŒìŠ¤íŠ¸</h1>
        
        <div class="test-section">
            <h3>ğŸ“Š ìŠ¤í‚¤ë§ˆ ìƒíƒœ</h3>
            <div class="schema-grid">
                <div class="schema-card">
                    <h4>ë“±ë¡ëœ ìŠ¤í‚¤ë§ˆ</h4>
                    <div class="value" id="schemaCount">-</div>
                </div>
                <div class="schema-card">
                    <h4>íŒ©í† ë¦¬ í•¨ìˆ˜</h4>
                    <div class="value" id="factoryCount">-</div>
                </div>
                <div class="schema-card">
                    <h4>ê²€ì¦ê¸°</h4>
                    <div class="value" id="validatorCount">-</div>
                </div>
                <div class="schema-card">
                    <h4>ìƒ˜í”Œ ë°ì´í„°</h4>
                    <div class="value" id="sampleCount">-</div>
                </div>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="overallProgress" style="width: 0%">0%</div>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ§ª ìŠ¤í‚¤ë§ˆ í…ŒìŠ¤íŠ¸</h3>
            <button class="button primary" onclick="testSchemaModule()">ìŠ¤í‚¤ë§ˆ ëª¨ë“ˆ í…ŒìŠ¤íŠ¸</button>
            <button class="button" onclick="testFactories()">íŒ©í† ë¦¬ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸</button>
            <button class="button" onclick="testValidators()">ê²€ì¦ê¸° í…ŒìŠ¤íŠ¸</button>
            <button class="button warning" onclick="testSampleData()">ìƒ˜í”Œ ë°ì´í„° í…ŒìŠ¤íŠ¸</button>
            <button class="button danger" onclick="clearOutput()">ì¶œë ¥ ì§€ìš°ê¸°</button>
        </div>

        <div class="test-section">
            <h3>ğŸ® ìƒ˜í”Œ ë°ì´í„° ìƒì„±</h3>
            <button class="button" onclick="createSampleCharacter()">ìœ¤ì•„ ìºë¦­í„° ìƒì„±</button>
            <button class="button" onclick="createSampleEpisode()">ì²« ë²ˆì§¸ ì—í”¼ì†Œë“œ ìƒì„±</button>
            <button class="button" onclick="createSampleChoice()">ì„ íƒì§€ ìƒì„±</button>
            <button class="button" onclick="createSampleSave()">ì €ì¥ ë°ì´í„° ìƒì„±</button>
        </div>

        <div class="test-section">
            <h3>âœ… ë°ì´í„° ê²€ì¦ í…ŒìŠ¤íŠ¸</h3>
            <button class="button" onclick="validateGoodData()">ì˜¬ë°”ë¥¸ ë°ì´í„° ê²€ì¦</button>
            <button class="button warning" onclick="validateBadData()">ì˜ëª»ëœ ë°ì´í„° ê²€ì¦</button>
            <button class="button primary" onclick="validateAllSamples()">ëª¨ë“  ìƒ˜í”Œ ê²€ì¦</button>
        </div>

        <div class="test-section">
            <h3>ğŸ“‹ ì‹¤ì‹œê°„ ì¶œë ¥</h3>
            <div class="output" id="testOutput">ë°ì´í„° ìŠ¤í‚¤ë§ˆ í…ŒìŠ¤íŠ¸ ì¶œë ¥ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...</div>
        </div>

        <div class="test-section">
            <h3>ğŸ—‚ï¸ ìƒì„±ëœ ë°ì´í„° í™•ì¸</h3>
            <div class="data-display" id="dataDisplay">ìƒì„±ëœ ë°ì´í„°ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...</div>
        </div>

        <div class="test-section">
            <h3>ğŸ” ê²€ì¦ ê²°ê³¼</h3>
            <div id="validationResults">ê²€ì¦ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...</div>
        </div>
    </div>

    <!-- ë¨¼ì € architecture.jsë¥¼ ë¡œë“œí•œ í›„ dataSchema.js ë¡œë“œ -->
    <script src="architecture.js"></script>
    <script src="dataSchema.js"></script>
    <script>
        let dataSchemaModule = null;
        let testResults = [];
        
        // ì¶œë ¥ í•¨ìˆ˜
        function output(message, type = 'info') {
            const now = new Date().toLocaleTimeString();
            const prefix = type === 'error' ? 'âŒ' : type === 'warn' ? 'âš ï¸' : type === 'success' ? 'âœ…' : 'â„¹ï¸';
            const formattedMessage = `[${now}] ${prefix} ${message}`;
            
            const outputDiv = document.getElementById('testOutput');
            outputDiv.textContent += formattedMessage + '\n';
            outputDiv.scrollTop = outputDiv.scrollHeight;
            
            console.log(formattedMessage);
        }

        // ë°ì´í„° í‘œì‹œ í•¨ìˆ˜
        function displayData(title, data) {
            const displayDiv = document.getElementById('dataDisplay');
            displayDiv.innerHTML += `<h4>${title}</h4><pre>${JSON.stringify(data, null, 2)}</pre><hr>`;
        }

        // ê²€ì¦ ê²°ê³¼ í‘œì‹œ í•¨ìˆ˜
        function showValidationResult(title, result) {
            const resultDiv = document.getElementById('validationResults');
            const className = result.valid ? 'validation-success' : 'validation-error';
            const status = result.valid ? 'âœ… ì„±ê³µ' : 'âŒ ì‹¤íŒ¨';
            
            let content = `<div class="validation-result ${className}">
                <strong>${title}: ${status}</strong>`;
            
            if (!result.valid && result.errors) {
                content += `<ul>`;
                result.errors.forEach(error => {
                    content += `<li>${error}</li>`;
                });
                content += `</ul>`;
            }
            
            content += `</div>`;
            resultDiv.innerHTML += content;
        }

        // ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateStatus() {
            if (dataSchemaModule) {
                document.getElementById('schemaCount').textContent = dataSchemaModule.schemas.size;
                document.getElementById('factoryCount').textContent = dataSchemaModule.factories.size;
                document.getElementById('validatorCount').textContent = dataSchemaModule.validators.size;
                
                // ìƒ˜í”Œ ë°ì´í„° ê°œìˆ˜
                const sampleCount = Object.keys(SAMPLE_DATA || {}).length;
                document.getElementById('sampleCount').textContent = sampleCount;
                
                // ì „ì²´ ì§„í–‰ë¥  (ì„ì˜ë¡œ ê³„ì‚°)
                const totalTests = testResults.length;
                const passedTests = testResults.filter(r => r.passed).length;
                const progress = totalTests > 0 ? Math.round((passedTests / totalTests) * 100) : 0;
                
                const progressBar = document.getElementById('overallProgress');
                progressBar.style.width = `${progress}%`;
                progressBar.textContent = `${progress}%`;
            }
        }

        // í…ŒìŠ¤íŠ¸ ê²°ê³¼ ê¸°ë¡
        function recordTest(name, passed, details = '') {
            testResults.push({ name, passed, details, timestamp: Date.now() });
            updateStatus();
        }

        // ìŠ¤í‚¤ë§ˆ ëª¨ë“ˆ í…ŒìŠ¤íŠ¸
        async function testSchemaModule() {
            output('ğŸ§ª ìŠ¤í‚¤ë§ˆ ëª¨ë“ˆ í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            
            try {
                // ì•„í‚¤í…ì²˜ì—ì„œ ë°ì´í„° ìŠ¤í‚¤ë§ˆ ëª¨ë“ˆ ê°€ì ¸ì˜¤ê¸°
                if (!window.gameArchitecture) {
                    // ì•„í‚¤í…ì²˜ê°€ ì—†ìœ¼ë©´ ìƒˆë¡œ ë§Œë“¤ê¸°
                    window.gameArchitecture = new GameArchitecture();
                    await window.gameArchitecture.startGame();
                }
                
                // DataSchemaModuleì´ ì •ì˜ë˜ì–´ ìˆë‹¤ë©´ ì‹¤ì œ êµ¬í˜„ìœ¼ë¡œ êµì²´
                if (typeof DataSchemaModule !== 'undefined') {
                    window.gameArchitecture.modules.set('dataSchema', new DataSchemaModule());
                    window.gameArchitecture.modules.get('dataSchema').setArchitecture(window.gameArchitecture);
                    await window.gameArchitecture.modules.get('dataSchema').initialize();
                }
                
                dataSchemaModule = window.gameArchitecture.getModule('dataSchema');
                
                if (dataSchemaModule instanceof DataSchemaModule) {
                    output('âœ… DataSchemaModule ì¸ìŠ¤í„´ìŠ¤ í™•ì¸ë¨', 'success');
                    recordTest('ëª¨ë“ˆ ì¸ìŠ¤í„´ìŠ¤', true);
                } else {
                    output('âŒ DataSchemaModuleì´ ì˜¬ë°”ë¥´ê²Œ ë¡œë“œë˜ì§€ ì•ŠìŒ', 'error');
                    recordTest('ëª¨ë“ˆ ì¸ìŠ¤í„´ìŠ¤', false);
                    return;
                }
                
                // ìŠ¤í‚¤ë§ˆ ê°œìˆ˜ í™•ì¸
                const schemaCount = dataSchemaModule.schemas.size;
                output(`ğŸ“Š ë“±ë¡ëœ ìŠ¤í‚¤ë§ˆ: ${schemaCount}ê°œ`);
                
                if (schemaCount >= 4) {
                    output('âœ… í•„ìš”í•œ ëª¨ë“  ìŠ¤í‚¤ë§ˆê°€ ë“±ë¡ë¨', 'success');
                    recordTest('ìŠ¤í‚¤ë§ˆ ë“±ë¡', true);
                } else {
                    output('âš ï¸ ì¼ë¶€ ìŠ¤í‚¤ë§ˆê°€ ëˆ„ë½ë¨', 'warn');
                    recordTest('ìŠ¤í‚¤ë§ˆ ë“±ë¡', false);
                }
                
                // ê°œë³„ ìŠ¤í‚¤ë§ˆ í™•ì¸
                const requiredSchemas = ['character', 'episode', 'choice', 'saveData'];
                for (const schemaName of requiredSchemas) {
                    try {
                        const schema = dataSchemaModule.getSchema(schemaName);
                        output(`âœ… ${schemaName} ìŠ¤í‚¤ë§ˆ ì¡°íšŒ ì„±ê³µ`, 'success');
                        recordTest(`${schemaName} ìŠ¤í‚¤ë§ˆ`, true);
                    } catch (error) {
                        output(`âŒ ${schemaName} ìŠ¤í‚¤ë§ˆ ì¡°íšŒ ì‹¤íŒ¨: ${error.message}`, 'error');
                        recordTest(`${schemaName} ìŠ¤í‚¤ë§ˆ`, false);
                    }
                }
                
                updateStatus();
                output('ğŸ¯ ìŠ¤í‚¤ë§ˆ ëª¨ë“ˆ í…ŒìŠ¤íŠ¸ ì™„ë£Œ', 'success');
                
            } catch (error) {
                output(`âŒ ìŠ¤í‚¤ë§ˆ ëª¨ë“ˆ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
                recordTest('ì „ì²´ ëª¨ë“ˆ', false, error.message);
            }
        }

        // íŒ©í† ë¦¬ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸
        function testFactories() {
            output('ğŸ­ íŒ©í† ë¦¬ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            
            if (!dataSchemaModule) {
                output('âŒ ë¨¼ì € ìŠ¤í‚¤ë§ˆ ëª¨ë“ˆ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”', 'error');
                return;
            }

            const factories = ['character', 'episode', 'choice', 'saveData'];
            
            factories.forEach(type => {
                try {
                    const data = dataSchemaModule.create(type);
                    output(`âœ… ${type} íŒ©í† ë¦¬ ì„±ê³µ - ID: ${data.id || data.player?.name || 'N/A'}`, 'success');
                    recordTest(`${type} íŒ©í† ë¦¬`, true);
                    
                    // ì²« ë²ˆì§¸ ë°ì´í„°ë§Œ í‘œì‹œ
                    if (type === 'character') {
                        displayData(`${type} ìƒì„± ê²°ê³¼`, data);
                    }
                } catch (error) {
                    output(`âŒ ${type} íŒ©í† ë¦¬ ì‹¤íŒ¨: ${error.message}`, 'error');
                    recordTest(`${type} íŒ©í† ë¦¬`, false);
                }
            });
            
            output('ğŸ­ íŒ©í† ë¦¬ í•¨ìˆ˜ í…ŒìŠ¤íŠ¸ ì™„ë£Œ', 'success');
        }

        // ê²€ì¦ê¸° í…ŒìŠ¤íŠ¸
        function testValidators() {
            output('âœ… ê²€ì¦ê¸° í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            
            if (!dataSchemaModule) {
                output('âŒ ë¨¼ì € ìŠ¤í‚¤ë§ˆ ëª¨ë“ˆ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”', 'error');
                return;
            }

            // ì˜¬ë°”ë¥¸ ë°ì´í„°ë¡œ í…ŒìŠ¤íŠ¸
            const validData = {
                character: { id: 'test', name: 'í…ŒìŠ¤íŠ¸', mbti: 'INFP', age: 20 },
                episode: { id: 'ep001', title: 'í…ŒìŠ¤íŠ¸ ì—í”¼ì†Œë“œ', order: 1 },
                choice: { id: 'choice001', text: 'í…ŒìŠ¤íŠ¸ ì„ íƒì§€' },
                saveData: { player: { name: 'í”Œë ˆì´ì–´' } }
            };

            Object.entries(validData).forEach(([type, data]) => {
                try {
                    const result = dataSchemaModule.validate(type, data);
                    if (result.valid) {
                        output(`âœ… ${type} ê²€ì¦ ì„±ê³µ`, 'success');
                        recordTest(`${type} ê²€ì¦`, true);
                    } else {
                        output(`âš ï¸ ${type} ê²€ì¦ ì‹¤íŒ¨: ${result.errors.join(', ')}`, 'warn');
                        recordTest(`${type} ê²€ì¦`, false);
                    }
                    showValidationResult(type, result);
                } catch (error) {
                    output(`âŒ ${type} ê²€ì¦ê¸° ì˜¤ë¥˜: ${error.message}`, 'error');
                    recordTest(`${type} ê²€ì¦`, false);
                }
            });

            output('âœ… ê²€ì¦ê¸° í…ŒìŠ¤íŠ¸ ì™„ë£Œ', 'success');
        }

        // ìƒ˜í”Œ ë°ì´í„° í…ŒìŠ¤íŠ¸
        function testSampleData() {
            output('ğŸ® ìƒ˜í”Œ ë°ì´í„° í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            
            if (typeof SAMPLE_DATA === 'undefined') {
                output('âŒ ìƒ˜í”Œ ë°ì´í„°ê°€ ì •ì˜ë˜ì§€ ì•ŠìŒ', 'error');
                recordTest('ìƒ˜í”Œ ë°ì´í„° ì¡´ì¬', false);
                return;
            }

            const samples = Object.keys(SAMPLE_DATA);
            output(`ğŸ“Š ë°œê²¬ëœ ìƒ˜í”Œ: ${samples.join(', ')}`);

            samples.forEach(type => {
                const sample = SAMPLE_DATA[type];
                output(`âœ… ${type} ìƒ˜í”Œ ë¡œë“œë¨ - ${sample.name || sample.title || sample.id}`, 'success');
                recordTest(`${type} ìƒ˜í”Œ`, true);
            });

            displayData('ëª¨ë“  ìƒ˜í”Œ ë°ì´í„°', SAMPLE_DATA);
            output('ğŸ® ìƒ˜í”Œ ë°ì´í„° í…ŒìŠ¤íŠ¸ ì™„ë£Œ', 'success');
        }

        // ê°œë³„ ìƒ˜í”Œ ìƒì„± í•¨ìˆ˜ë“¤
        function createSampleCharacter() {
            try {
                const character = dataSchemaModule.create('character', {
                    name: 'ìœ¤ì•„',
                    mbti: 'INFP',
                    age: 20
                });
                output(`âœ… ìœ¤ì•„ ìºë¦­í„° ìƒì„±ë¨ - ID: ${character.id}`, 'success');
                displayData('ìƒì„±ëœ ìœ¤ì•„ ìºë¦­í„°', character);
            } catch (error) {
                output(`âŒ ìºë¦­í„° ìƒì„± ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        function createSampleEpisode() {
            try {
                const episode = dataSchemaModule.create('episode', {
                    title: 'ì–´ìƒ‰í•œ ì•„ì¹¨',
                    order: 1
                });
                output(`âœ… ì—í”¼ì†Œë“œ ìƒì„±ë¨ - ${episode.title}`, 'success');
                displayData('ìƒì„±ëœ ì—í”¼ì†Œë“œ', episode);
            } catch (error) {
                output(`âŒ ì—í”¼ì†Œë“œ ìƒì„± ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        function createSampleChoice() {
            try {
                const choice = dataSchemaModule.create('choice', {
                    text: 'ë‹¤ì •í•˜ê²Œ ëŒ€ë‹µí•œë‹¤',
                    effects: { affection_change: 5 }
                });
                output(`âœ… ì„ íƒì§€ ìƒì„±ë¨ - ${choice.text}`, 'success');
                displayData('ìƒì„±ëœ ì„ íƒì§€', choice);
            } catch (error) {
                output(`âŒ ì„ íƒì§€ ìƒì„± ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        function createSampleSave() {
            try {
                const saveData = dataSchemaModule.create('saveData', {
                    player: { name: 'ì‹œìš°' }
                });
                output(`âœ… ì €ì¥ ë°ì´í„° ìƒì„±ë¨ - ${saveData.player.name}`, 'success');
                displayData('ìƒì„±ëœ ì €ì¥ ë°ì´í„°', saveData);
            } catch (error) {
                output(`âŒ ì €ì¥ ë°ì´í„° ìƒì„± ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }

        // ê²€ì¦ í…ŒìŠ¤íŠ¸ë“¤
        function validateGoodData() {
            output('âœ… ì˜¬ë°”ë¥¸ ë°ì´í„° ê²€ì¦ í…ŒìŠ¤íŠ¸...');
            
            const goodData = [
                { type: 'character', data: { id: 'yuna', name: 'ìœ¤ì•„', mbti: 'INFP', age: 20 } },
                { type: 'episode', data: { id: 'ep001', title: 'ì²« ë§Œë‚¨', order: 1 } },
                { type: 'choice', data: { id: 'c001', text: 'ì¢‹ì€ ì„ íƒ' } },
                { type: 'saveData', data: { player: { name: 'í”Œë ˆì´ì–´' } } }
            ];

            goodData.forEach(({ type, data }) => {
                const result = dataSchemaModule.validate(type, data);
                showValidationResult(`ì˜¬ë°”ë¥¸ ${type} ë°ì´í„°`, result);
            });
        }

        function validateBadData() {
            output('âš ï¸ ì˜ëª»ëœ ë°ì´í„° ê²€ì¦ í…ŒìŠ¤íŠ¸...');
            
            const badData = [
                { type: 'character', data: { name: 'ìœ¤ì•„', mbti: 'WRONG', age: 'not_number' } },
                { type: 'episode', data: { title: 'ì œëª©ë§Œ', order: 100 } },
                { type: 'choice', data: { id: 'c001' } }, // text ì—†ìŒ
                { type: 'saveData', data: {} } // player ì—†ìŒ
            ];

            badData.forEach(({ type, data }) => {
                const result = dataSchemaModule.validate(type, data);
                showValidationResult(`ì˜ëª»ëœ ${type} ë°ì´í„°`, result);
            });
        }

        function validateAllSamples() {
            output('ğŸ¯ ëª¨ë“  ìƒ˜í”Œ ê²€ì¦ í…ŒìŠ¤íŠ¸...');
            
            if (typeof SAMPLE_DATA !== 'undefined') {
                Object.entries(SAMPLE_DATA).forEach(([type, data]) => {
                    const result = dataSchemaModule.validate(type, data);
                    showValidationResult(`ìƒ˜í”Œ ${type} ë°ì´í„°`, result);
                });
            }
        }

        function clearOutput() {
            document.getElementById('testOutput').textContent = 'ì¶œë ¥ì´ ì§€ì›Œì¡ŒìŠµë‹ˆë‹¤.\n';
            document.getElementById('dataDisplay').innerHTML = 'ë°ì´í„° í‘œì‹œê°€ ì§€ì›Œì¡ŒìŠµë‹ˆë‹¤.';
            document.getElementById('validationResults').innerHTML = 'ê²€ì¦ ê²°ê³¼ê°€ ì§€ì›Œì¡ŒìŠµë‹ˆë‹¤.';
            testResults = [];
            updateStatus();
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì‹¤í–‰
        window.addEventListener('load', async () => {
            output('ğŸŒ ë°ì´í„° ìŠ¤í‚¤ë§ˆ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë“œë¨');
            
            // DataSchemaModuleì´ ë¡œë“œëœ í›„ ì•„í‚¤í…ì²˜ ëª¨ë“ˆ ë‹¤ì‹œ ë“±ë¡
            if (window.gameArchitecture && typeof DataSchemaModule !== 'undefined') {
                try {
                    // ê¸°ì¡´ ì„ì‹œ ëª¨ë“ˆ êµì²´
                    window.gameArchitecture.modules.set('dataSchema', new DataSchemaModule());
                    window.gameArchitecture.modules.get('dataSchema').setArchitecture(window.gameArchitecture);
                    await window.gameArchitecture.modules.get('dataSchema').initialize();
                    output('ğŸ”„ DataSchemaModule ì‹¤ì œ êµ¬í˜„ìœ¼ë¡œ êµì²´ë¨', 'success');
                } catch (error) {
                    output(`âš ï¸ ëª¨ë“ˆ êµì²´ ì‹¤íŒ¨: ${error.message}`, 'warn');
                }
            }
            
            await testSchemaModule();
        });
    </script>
</body>
</html>