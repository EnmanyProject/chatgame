# ğŸš€ Phase 1-C ì‘ì—… ì‹œì‘ í”„ë¡¬í”„íŠ¸

---

## ğŸ“‹ Claude Code ì‘ì—… ì§€ì‹œ

```
ì•ˆë…• Claude Code! Phase 1-C ì‘ì—…ì„ ì‹œì‘í•˜ì.

[í•„ìˆ˜] ë¨¼ì € ë‹¤ìŒ ë¬¸ì„œë“¤ì„ ì½ê³  ìˆ™ì§€í•´ì¤˜:
1. .claude-code/handoff-to-claude-code.md (ì „ì²´ í”„ë¡œì íŠ¸ ê°œìš”)
2. .claude-code/phase-1b-start-prompt.md (ë°©ê¸ˆ ì™„ë£Œí•œ ì‘ì—…)
3. claude.md (í”„ë¡œì íŠ¸ íˆìŠ¤í† ë¦¬)

[ì™„ë£Œ í™•ì¸] Phase 1-B ì‘ì—… ë‚´ì—­:
âœ… js/episode-trigger-engine.js ìƒì„± ì™„ë£Œ
âœ… ì‹œê°„/í˜¸ê°ë„/í–‰ë™/ëœë¤ íŠ¸ë¦¬ê±° êµ¬í˜„
âœ… ìºë¦­í„°ê°€ ìë™ìœ¼ë¡œ ë¨¼ì € ì—°ë½í•˜ëŠ” ì‹œìŠ¤í…œ
âœ… Git ì»¤ë°‹ & í‘¸ì‹œ ì™„ë£Œ
```

---

## ğŸ¯ Phase 1-C ì‘ì—… ëª©í‘œ

**ì‘ì—…ëª…**: ë©€í‹° ìºë¦­í„° ë™ì‹œ ì±„íŒ… ì‹œìŠ¤í…œ  
**íŒŒì¼ ìƒì„±**: 
- `character-list-ui.html` (ëŒ€í™”ë°© ëª©ë¡ í™”ë©´)
- `js/chat-room-manager.js` (ëŒ€í™”ë°© ê´€ë¦¬ ì‹œìŠ¤í…œ)
- `js/multi-character-state.js` (ì—¬ëŸ¬ ìºë¦­í„° ìƒíƒœ ê´€ë¦¬)

**ì˜ˆìƒ ì‹œê°„**: 1ì¼ ì‘ì—…  
**ëª©í‘œ**: ì¹´ì¹´ì˜¤í†¡ì²˜ëŸ¼ ì—¬ëŸ¬ ìºë¦­í„°ì™€ ë™ì‹œì— ì±„íŒ…í•˜ëŠ” ì‹œìŠ¤í…œ

---

## ğŸ“± UI/UX ìš”êµ¬ì‚¬í•­

### í™”ë©´ êµ¬ì„±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¬ ëŒ€í™”ë°©                    [+] [âš™ï¸]  â”‚ â† í—¤ë”
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ” ê²€ìƒ‰                                â”‚ â† ê²€ìƒ‰ì°½
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [ì‚¬ì§„] ìœ¤ì•„ (INFP)          1   â”‚   â”‚ â† ëŒ€í™”ë°© 1
â”‚  â”‚        "ì˜¤ë¹  ë­í•´?"              â”‚   â”‚
â”‚  â”‚                          14:23  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [ì‚¬ì§„] ë¯¸ë‚˜ (ENFP)          5   â”‚   â”‚ â† ëŒ€í™”ë°© 2
â”‚  â”‚        "ì˜¤ë¹ ~ ë†€ì•„ì¤˜!"           â”‚   â”‚
â”‚  â”‚                          12:15  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ [ì‚¬ì§„] ì„œì—° (INTJ)              â”‚   â”‚ â† ëŒ€í™”ë°© 3
â”‚  â”‚        "ë…¼ë¬¸ ì½ëŠ” ì¤‘..."         â”‚   â”‚
â”‚  â”‚                          ì–´ì œ   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ì¹´ë“œ í´ë¦­ â†’ chat-ui.html?character=yuna_infp
```

---

## ğŸ“ ìƒì„¸ ì‘ì—… ë‚´ìš©

### 1ï¸âƒ£ character-list-ui.html (50% ë¹„ì¤‘)

#### êµ¬í˜„ ìš”êµ¬ì‚¬í•­:
```html
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ëŒ€í™”ë°© - ì—°ì•  ì‹œë®¬ë ˆì´ì…˜</title>
  <style>
    /* ì¹´ì¹´ì˜¤í†¡ ìŠ¤íƒ€ì¼ CSS */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background-color: #b2c7d9;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .container {
      width: 100%;
      max-width: 480px;
      height: 100vh;
      background-color: white;
      display: flex;
      flex-direction: column;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
    }

    /* í—¤ë” */
    .header {
      background-color: #3a5068;
      color: white;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header-title {
      font-size: 20px;
      font-weight: bold;
    }

    .header-buttons {
      display: flex;
      gap: 15px;
    }

    .header-button {
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
    }

    /* ê²€ìƒ‰ì°½ */
    .search-bar {
      padding: 10px 20px;
      background-color: #f5f5f5;
      border-bottom: 1px solid #ddd;
    }

    .search-input {
      width: 100%;
      padding: 10px 15px;
      border: none;
      border-radius: 20px;
      background-color: white;
      font-size: 14px;
    }

    /* ëŒ€í™”ë°© ë¦¬ìŠ¤íŠ¸ */
    .chat-list {
      flex: 1;
      overflow-y: auto;
      background-color: white;
    }

    .chat-room {
      display: flex;
      padding: 15px 20px;
      border-bottom: 1px solid #f0f0f0;
      cursor: pointer;
      transition: background-color 0.2s;
      position: relative;
    }

    .chat-room:hover {
      background-color: #f8f8f8;
    }

    .chat-room.has-unread {
      background-color: #fef9e7;
    }

    /* í”„ë¡œí•„ ì‚¬ì§„ */
    .profile-pic {
      width: 50px;
      height: 50px;
      border-radius: 25px;
      background-color: #ddd;
      margin-right: 15px;
      object-fit: cover;
    }

    /* ëŒ€í™”ë°© ì •ë³´ */
    .chat-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .chat-name {
      font-size: 16px;
      font-weight: bold;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .mbti-badge {
      font-size: 11px;
      padding: 2px 6px;
      background-color: #3a5068;
      color: white;
      border-radius: 10px;
      font-weight: normal;
    }

    .last-message {
      font-size: 14px;
      color: #666;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    /* ë©”íƒ€ ì •ë³´ */
    .chat-meta {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      justify-content: center;
      gap: 5px;
    }

    .last-time {
      font-size: 12px;
      color: #999;
    }

    .unread-badge {
      background-color: #ff6b6b;
      color: white;
      border-radius: 12px;
      padding: 3px 8px;
      font-size: 12px;
      font-weight: bold;
      min-width: 20px;
      text-align: center;
    }

    /* í”Œë¡œíŒ… ë²„íŠ¼ */
    .fab {
      position: absolute;
      bottom: 30px;
      right: 30px;
      width: 60px;
      height: 60px;
      border-radius: 30px;
      background-color: #ffeb3b;
      color: #3a5068;
      font-size: 28px;
      border: none;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      cursor: pointer;
      transition: transform 0.2s;
    }

    .fab:hover {
      transform: scale(1.1);
    }

    /* ë¹ˆ ìƒíƒœ */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #999;
    }

    .empty-state-icon {
      font-size: 64px;
      margin-bottom: 20px;
    }

    .empty-state-text {
      font-size: 16px;
      margin-bottom: 10px;
    }

    .empty-state-button {
      margin-top: 20px;
      padding: 12px 30px;
      background-color: #ffeb3b;
      color: #3a5068;
      border: none;
      border-radius: 25px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
    }

    /* ë¡œë”© */
    .loading {
      text-align: center;
      padding: 40px;
      color: #999;
    }

    /* ëª¨ë°”ì¼ ìµœì í™” */
    @media (max-width: 480px) {
      .container {
        max-width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- í—¤ë” -->
    <div class="header">
      <div class="header-title">ğŸ’¬ ëŒ€í™”ë°©</div>
      <div class="header-buttons">
        <button class="header-button" onclick="openSearch()">ğŸ”</button>
        <button class="header-button" onclick="openSettings()">âš™ï¸</button>
      </div>
    </div>

    <!-- ê²€ìƒ‰ì°½ -->
    <div class="search-bar">
      <input 
        type="text" 
        class="search-input" 
        placeholder="ëŒ€í™”ë°© ê²€ìƒ‰"
        id="searchInput"
        oninput="filterChatRooms()"
      >
    </div>

    <!-- ëŒ€í™”ë°© ë¦¬ìŠ¤íŠ¸ -->
    <div class="chat-list" id="chatList">
      <!-- ë¡œë”© -->
      <div class="loading" id="loadingIndicator">
        ëŒ€í™”ë°©ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
      </div>

      <!-- ëŒ€í™”ë°©ì´ ì—†ì„ ë•Œ -->
      <div class="empty-state" id="emptyState" style="display: none;">
        <div class="empty-state-icon">ğŸ’”</div>
        <div class="empty-state-text">ì•„ì§ ëŒ€í™” ì¤‘ì¸ ìºë¦­í„°ê°€ ì—†ì–´ìš”</div>
        <div class="empty-state-text" style="font-size: 14px; color: #ccc;">
          ìƒˆ ìºë¦­í„°ë¥¼ ì¶”ê°€í•´ì„œ ëŒ€í™”ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”!
        </div>
        <button class="empty-state-button" onclick="addNewCharacter()">
          + ìƒˆ ìºë¦­í„° ì¶”ê°€
        </button>
      </div>
    </div>

    <!-- ìƒˆ ëŒ€í™” ë²„íŠ¼ (í”Œë¡œíŒ…) -->
    <button class="fab" onclick="addNewCharacter()" title="ìƒˆ ëŒ€í™” ì‹œì‘">
      +
    </button>
  </div>

  <script src="js/chat-room-manager.js"></script>
  <script src="js/multi-character-state.js"></script>
  <script>
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ëŒ€í™”ë°© ëª©ë¡ ë¡œë“œ
    document.addEventListener('DOMContentLoaded', () => {
      loadChatRooms();
      
      // 30ì´ˆë§ˆë‹¤ ì—…ë°ì´íŠ¸ (ìƒˆ ë©”ì‹œì§€ í™•ì¸)
      setInterval(() => {
        updateChatRoomList();
      }, 30000);
    });

    // ëŒ€í™”ë°© ëª©ë¡ ë¡œë“œ
    async function loadChatRooms() {
      try {
        const chatRooms = await ChatRoomManager.getAllChatRooms();
        renderChatRooms(chatRooms);
      } catch (error) {
        console.error('ëŒ€í™”ë°© ë¡œë“œ ì‹¤íŒ¨:', error);
        showError('ëŒ€í™”ë°©ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
      }
    }

    // ëŒ€í™”ë°© ë Œë”ë§
    function renderChatRooms(chatRooms) {
      const chatList = document.getElementById('chatList');
      const loading = document.getElementById('loadingIndicator');
      const emptyState = document.getElementById('emptyState');

      loading.style.display = 'none';

      if (chatRooms.length === 0) {
        emptyState.style.display = 'block';
        return;
      }

      emptyState.style.display = 'none';

      // ë§ˆì§€ë§‰ ë©”ì‹œì§€ ì‹œê°„ ìˆœìœ¼ë¡œ ì •ë ¬
      chatRooms.sort((a, b) => b.lastMessageTime - a.lastMessageTime);

      chatList.innerHTML = chatRooms.map(room => `
        <div 
          class="chat-room ${room.unreadCount > 0 ? 'has-unread' : ''}"
          onclick="openChatRoom('${room.characterId}')"
        >
          <img 
            src="${room.profilePic || 'assets/default-profile.png'}" 
            alt="${room.characterName}"
            class="profile-pic"
            onerror="this.src='assets/default-profile.png'"
          >
          <div class="chat-info">
            <div class="chat-name">
              ${room.characterName}
              <span class="mbti-badge">${room.mbti}</span>
            </div>
            <div class="last-message">${room.lastMessage || 'ëŒ€í™”ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”'}</div>
          </div>
          <div class="chat-meta">
            <div class="last-time">${formatTime(room.lastMessageTime)}</div>
            ${room.unreadCount > 0 ? `
              <div class="unread-badge">${room.unreadCount > 99 ? '99+' : room.unreadCount}</div>
            ` : ''}
          </div>
        </div>
      `).join('');
    }

    // ì‹œê°„ í¬ë§·
    function formatTime(timestamp) {
      if (!timestamp) return '';

      const now = Date.now();
      const diff = now - timestamp;
      const minutes = Math.floor(diff / 60000);
      const hours = Math.floor(diff / 3600000);
      const days = Math.floor(diff / 86400000);

      if (minutes < 1) return 'ë°©ê¸ˆ';
      if (minutes < 60) return `${minutes}ë¶„ ì „`;
      if (hours < 24) {
        const date = new Date(timestamp);
        return `${date.getHours()}:${String(date.getMinutes()).padStart(2, '0')}`;
      }
      if (days === 1) return 'ì–´ì œ';
      if (days < 7) return `${days}ì¼ ì „`;
      
      const date = new Date(timestamp);
      return `${date.getMonth() + 1}/${date.getDate()}`;
    }

    // ëŒ€í™”ë°© ì—´ê¸°
    function openChatRoom(characterId) {
      // ì½ìŒ ì²˜ë¦¬
      ChatRoomManager.markAsRead(characterId);
      
      // chat-ui.htmlë¡œ ì´ë™
      window.location.href = `chat-ui.html?character=${characterId}`;
    }

    // ëŒ€í™”ë°© ê²€ìƒ‰
    function filterChatRooms() {
      const searchText = document.getElementById('searchInput').value.toLowerCase();
      const chatRooms = document.querySelectorAll('.chat-room');

      chatRooms.forEach(room => {
        const name = room.querySelector('.chat-name').textContent.toLowerCase();
        const message = room.querySelector('.last-message').textContent.toLowerCase();
        
        if (name.includes(searchText) || message.includes(searchText)) {
          room.style.display = 'flex';
        } else {
          room.style.display = 'none';
        }
      });
    }

    // ëŒ€í™”ë°© ëª©ë¡ ì—…ë°ì´íŠ¸ (ìƒˆ ë©”ì‹œì§€ í™•ì¸)
    async function updateChatRoomList() {
      const chatRooms = await ChatRoomManager.getAllChatRooms();
      renderChatRooms(chatRooms);
    }

    // ìƒˆ ìºë¦­í„° ì¶”ê°€
    function addNewCharacter() {
      // ìºë¦­í„° ì„ íƒ ëª¨ë‹¬ ì—´ê¸°
      window.location.href = 'character-select.html';
    }

    // ê²€ìƒ‰ ì—´ê¸°
    function openSearch() {
      document.getElementById('searchInput').focus();
    }

    // ì„¤ì • ì—´ê¸°
    function openSettings() {
      window.location.href = 'settings.html';
    }

    // ì—ëŸ¬ í‘œì‹œ
    function showError(message) {
      alert(message);
    }
  </script>
</body>
</html>
```

---

### 2ï¸âƒ£ js/chat-room-manager.js (30% ë¹„ì¤‘)

#### êµ¬í˜„ ìš”êµ¬ì‚¬í•­:
```javascript
/**
 * Chat Room Manager
 * ì—¬ëŸ¬ ìºë¦­í„°ì™€ì˜ ëŒ€í™”ë°©ì„ ê´€ë¦¬
 */

class ChatRoomManager {
  constructor() {
    this.chatRooms = this.loadFromStorage();
  }

  // ëª¨ë“  ëŒ€í™”ë°© ê°€ì ¸ì˜¤ê¸°
  static async getAllChatRooms() {
    const manager = new ChatRoomManager();
    return manager.chatRooms;
  }

  // ëŒ€í™”ë°© ìƒì„±/ì—…ë°ì´íŠ¸
  static createOrUpdateRoom(characterId, data) {
    const manager = new ChatRoomManager();
    
    const existingRoom = manager.chatRooms.find(
      room => room.characterId === characterId
    );

    if (existingRoom) {
      // ê¸°ì¡´ ëŒ€í™”ë°© ì—…ë°ì´íŠ¸
      Object.assign(existingRoom, data);
      existingRoom.lastMessageTime = Date.now();
    } else {
      // ìƒˆ ëŒ€í™”ë°© ìƒì„±
      manager.chatRooms.push({
        characterId: characterId,
        characterName: data.characterName,
        mbti: data.mbti,
        profilePic: data.profilePic,
        lastMessage: data.lastMessage || '',
        lastMessageTime: Date.now(),
        unreadCount: 0,
        isPinned: false,
        isMuted: false
      });
    }

    manager.saveToStorage();
    return manager.chatRooms;
  }

  // ë§ˆì§€ë§‰ ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
  static updateLastMessage(characterId, message, isFromUser = false) {
    const manager = new ChatRoomManager();
    const room = manager.chatRooms.find(
      room => room.characterId === characterId
    );

    if (room) {
      room.lastMessage = message;
      room.lastMessageTime = Date.now();
      
      // ìºë¦­í„°ê°€ ë³´ë‚¸ ë©”ì‹œì§€ë©´ ì½ì§€ ì•ŠìŒ ì¹´ìš´íŠ¸ ì¦ê°€
      if (!isFromUser) {
        room.unreadCount = (room.unreadCount || 0) + 1;
      }

      manager.saveToStorage();
    }
  }

  // ì½ìŒ ì²˜ë¦¬
  static markAsRead(characterId) {
    const manager = new ChatRoomManager();
    const room = manager.chatRooms.find(
      room => room.characterId === characterId
    );

    if (room) {
      room.unreadCount = 0;
      manager.saveToStorage();
    }
  }

  // ëŒ€í™”ë°© ì‚­ì œ
  static deleteRoom(characterId) {
    const manager = new ChatRoomManager();
    manager.chatRooms = manager.chatRooms.filter(
      room => room.characterId !== characterId
    );
    manager.saveToStorage();
  }

  // ëŒ€í™”ë°© ê³ ì •/í•´ì œ
  static togglePin(characterId) {
    const manager = new ChatRoomManager();
    const room = manager.chatRooms.find(
      room => room.characterId === characterId
    );

    if (room) {
      room.isPinned = !room.isPinned;
      manager.saveToStorage();
    }
  }

  // ì•Œë¦¼ ìŒì†Œê±°/í•´ì œ
  static toggleMute(characterId) {
    const manager = new ChatRoomManager();
    const room = manager.chatRooms.find(
      room => room.characterId === characterId
    );

    if (room) {
      room.isMuted = !room.isMuted;
      manager.saveToStorage();
    }
  }

  // íŠ¹ì • ëŒ€í™”ë°© ì •ë³´ ê°€ì ¸ì˜¤ê¸°
  static getRoom(characterId) {
    const manager = new ChatRoomManager();
    return manager.chatRooms.find(
      room => room.characterId === characterId
    );
  }

  // ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ì´ ê°œìˆ˜
  static getTotalUnreadCount() {
    const manager = new ChatRoomManager();
    return manager.chatRooms.reduce(
      (total, room) => total + (room.unreadCount || 0),
      0
    );
  }

  // localStorageì—ì„œ ë¡œë“œ
  loadFromStorage() {
    try {
      const stored = localStorage.getItem('chatRooms');
      return stored ? JSON.parse(stored) : [];
    } catch (error) {
      console.error('ëŒ€í™”ë°© ë¡œë“œ ì‹¤íŒ¨:', error);
      return [];
    }
  }

  // localStorageì— ì €ì¥
  saveToStorage() {
    try {
      localStorage.setItem('chatRooms', JSON.stringify(this.chatRooms));
      
      // ì´ ì½ì§€ ì•Šì€ ê°œìˆ˜ë¥¼ ë¸Œë¼ìš°ì € íƒ€ì´í‹€ì— í‘œì‹œ
      const totalUnread = this.chatRooms.reduce(
        (total, room) => total + (room.unreadCount || 0),
        0
      );
      
      if (totalUnread > 0) {
        document.title = `(${totalUnread}) ëŒ€í™”ë°©`;
      } else {
        document.title = 'ëŒ€í™”ë°©';
      }
    } catch (error) {
      console.error('ëŒ€í™”ë°© ì €ì¥ ì‹¤íŒ¨:', error);
    }
  }
}

// ì „ì—­ ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ
window.ChatRoomManager = ChatRoomManager;
```

---

### 3ï¸âƒ£ js/multi-character-state.js (20% ë¹„ì¤‘)

#### êµ¬í˜„ ìš”êµ¬ì‚¬í•­:
```javascript
/**
 * Multi Character State Manager
 * ì—¬ëŸ¬ ìºë¦­í„°ì˜ ìƒíƒœë¥¼ ë…ë¦½ì ìœ¼ë¡œ ê´€ë¦¬
 */

class MultiCharacterState {
  constructor() {
    this.states = this.loadAllStates();
  }

  // íŠ¹ì • ìºë¦­í„° ìƒíƒœ ê°€ì ¸ì˜¤ê¸°
  static getState(characterId) {
    const manager = new MultiCharacterState();
    
    if (!manager.states[characterId]) {
      // ìƒˆ ìºë¦­í„°ë©´ ì´ˆê¸° ìƒíƒœ ìƒì„±
      manager.states[characterId] = manager.createInitialState(characterId);
      manager.saveAllStates();
    }

    return manager.states[characterId];
  }

  // íŠ¹ì • ìºë¦­í„° ìƒíƒœ ì—…ë°ì´íŠ¸
  static updateState(characterId, updates) {
    const manager = new MultiCharacterState();
    
    if (!manager.states[characterId]) {
      manager.states[characterId] = manager.createInitialState(characterId);
    }

    Object.assign(manager.states[characterId], updates);
    manager.saveAllStates();

    return manager.states[characterId];
  }

  // í˜¸ê°ë„ ì—…ë°ì´íŠ¸
  static updateAffection(characterId, delta) {
    const state = MultiCharacterState.getState(characterId);
    const oldAffection = state.affection;
    
    state.affection = Math.max(1, Math.min(10, state.affection + delta));
    
    // í˜¸ê°ë„ ë³€í™” ì´ë²¤íŠ¸ ë°œìƒ
    if (state.affection !== oldAffection) {
      const event = new CustomEvent('affectionChanged', {
        detail: {
          characterId: characterId,
          old: oldAffection,
          new: state.affection,
          delta: delta
        }
      });
      window.dispatchEvent(event);
    }

    MultiCharacterState.updateState(characterId, { affection: state.affection });
    return state.affection;
  }

  // ì• ì •ë„ ì—…ë°ì´íŠ¸
  static updateLove(characterId, delta) {
    const state = MultiCharacterState.getState(characterId);
    state.love = Math.max(1, Math.min(10, state.love + delta));
    MultiCharacterState.updateState(characterId, { love: state.love });
    return state.love;
  }

  // ê°ì • ìƒíƒœ ì„¤ì •
  static setEmotion(characterId, emotion) {
    MultiCharacterState.updateState(characterId, { emotion: emotion });
  }

  // ëŒ€í™” í†¤ ë ˆë²¨ ê³„ì‚°
  static getToneLevel(characterId) {
    const state = MultiCharacterState.getState(characterId);
    
    if (state.affection <= 2) return 1; // ì¡´ëŒ“ë§
    if (state.affection <= 4) return 2; // ë°˜ë§
    if (state.affection <= 6) return 3; // ì• êµ
    if (state.affection <= 8) return 4; // ì• ì •í‘œí˜„
    return 5; // ì ê·¹ì 
  }

  // ë‹µì¥ ì†ë„ ê³„ì‚°
  static getResponseSpeed(characterId) {
    const state = MultiCharacterState.getState(characterId);
    
    // í˜¸ê°ë„ì™€ ê°ì • ìƒíƒœì— ë”°ë¼ ë‹µì¥ ì†ë„ ê²°ì •
    if (state.emotion === 'angry') return 5; // ë§¤ìš° ëŠë¦¼
    if (state.emotion === 'sad') return 4;
    if (state.affection <= 3) return 3; // ë³´í†µ
    if (state.affection <= 6) return 2; // ë¹ ë¦„
    return 1; // ë§¤ìš° ë¹ ë¦„
  }

  // ë¨¼ì € ì—°ë½ í™•ë¥  ê³„ì‚°
  static getContactProbability(characterId) {
    const state = MultiCharacterState.getState(characterId);
    
    if (state.affection <= 2) return 0;
    if (state.affection <= 4) return 10;
    if (state.affection <= 6) return 30;
    if (state.affection <= 8) return 60;
    return 90;
  }

  // ì‚¬ì§„ ë ˆì–´ë„ ê³„ì‚°
  static getPhotoRarity(characterId) {
    const state = MultiCharacterState.getState(characterId);
    
    if (state.affection <= 3) return 1; // Commonë§Œ
    if (state.affection <= 6) return 2; // Rareê¹Œì§€
    if (state.affection <= 8) return 3; // Epicê¹Œì§€
    return 4; // Legendaryê¹Œì§€
  }

  // ë§ˆì§€ë§‰ ìœ ì € ì‘ë‹µ ì‹œê°„ ì—…ë°ì´íŠ¸
  static updateLastReply(characterId) {
    MultiCharacterState.updateState(characterId, {
      lastUserReply: Date.now()
    });
  }

  // ëŒ€í™” íˆìŠ¤í† ë¦¬ ì¶”ê°€
  static addToHistory(characterId, message) {
    const state = MultiCharacterState.getState(characterId);
    
    if (!state.conversationHistory) {
      state.conversationHistory = [];
    }

    state.conversationHistory.push({
      ...message,
      timestamp: Date.now()
    });

    // ìµœê·¼ 50ê°œë§Œ ìœ ì§€ (ë©”ëª¨ë¦¬ ì ˆì•½)
    if (state.conversationHistory.length > 50) {
      state.conversationHistory = state.conversationHistory.slice(-50);
    }

    MultiCharacterState.updateState(characterId, {
      conversationHistory: state.conversationHistory
    });
  }

  // ëŒ€í™” íˆìŠ¤í† ë¦¬ ê°€ì ¸ì˜¤ê¸°
  static getHistory(characterId, limit = 50) {
    const state = MultiCharacterState.getState(characterId);
    const history = state.conversationHistory || [];
    return history.slice(-limit);
  }

  // ìºë¦­í„° ìƒíƒœ ì´ˆê¸°í™”
  static resetState(characterId) {
    const manager = new MultiCharacterState();
    manager.states[characterId] = manager.createInitialState(characterId);
    manager.saveAllStates();
  }

  // ìºë¦­í„° ì‚­ì œ
  static deleteCharacter(characterId) {
    const manager = new MultiCharacterState();
    delete manager.states[characterId];
    manager.saveAllStates();
  }

  // ì´ˆê¸° ìƒíƒœ ìƒì„±
  createInitialState(characterId) {
    return {
      characterId: characterId,
      affection: 1,
      love: 1,
      emotion: 'normal',
      lastUserReply: Date.now(),
      conversationHistory: [],
      createdAt: Date.now()
    };
  }

  // ëª¨ë“  ìƒíƒœ ë¡œë“œ
  loadAllStates() {
    try {
      const stored = localStorage.getItem('multiCharacterStates');
      return stored ? JSON.parse(stored) : {};
    } catch (error) {
      console.error('ìºë¦­í„° ìƒíƒœ ë¡œë“œ ì‹¤íŒ¨:', error);
      return {};
    }
  }

  // ëª¨ë“  ìƒíƒœ ì €ì¥
  saveAllStates() {
    try {
      localStorage.setItem(
        'multiCharacterStates',
        JSON.stringify(this.states)
      );
    } catch (error) {
      console.error('ìºë¦­í„° ìƒíƒœ ì €ì¥ ì‹¤íŒ¨:', error);
    }
  }

  // ëª¨ë“  ìºë¦­í„° ID ê°€ì ¸ì˜¤ê¸°
  static getAllCharacterIds() {
    const manager = new MultiCharacterState();
    return Object.keys(manager.states);
  }

  // í†µê³„ ì •ë³´
  static getStatistics() {
    const manager = new MultiCharacterState();
    const characterIds = Object.keys(manager.states);

    return {
      totalCharacters: characterIds.length,
      averageAffection: characterIds.reduce((sum, id) => 
        sum + manager.states[id].affection, 0
      ) / characterIds.length || 0,
      highestAffection: Math.max(...characterIds.map(id => 
        manager.states[id].affection
      ), 0),
      totalMessages: characterIds.reduce((sum, id) => 
        sum + (manager.states[id].conversationHistory?.length || 0), 0
      )
    };
  }
}

// ì „ì—­ ì ‘ê·¼ ê°€ëŠ¥í•˜ê²Œ
window.MultiCharacterState = MultiCharacterState;
```

---

## ğŸ”— ê¸°ì¡´ ì‹œìŠ¤í…œ ì—°ë™

### chat-ui.html ìˆ˜ì •ì‚¬í•­:

```javascript
// chat-ui.html ì‹œì‘ ë¶€ë¶„ì— ì¶”ê°€

// URLì—ì„œ ìºë¦­í„° ID ê°€ì ¸ì˜¤ê¸°
function getCharacterIdFromURL() {
  const params = new URLSearchParams(window.location.search);
  return params.get('character');
}

// ì±„íŒ… ì‹œì‘
function startChat() {
  const characterId = getCharacterIdFromURL();
  
  if (!characterId) {
    alert('ìºë¦­í„°ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
    window.location.href = 'character-list-ui.html';
    return;
  }

  // ëŒ€í™”ë°©ì— ì¶”ê°€ (ì—†ìœ¼ë©´ ìƒì„±)
  const characterData = loadCharacterData(characterId);
  ChatRoomManager.createOrUpdateRoom(characterId, {
    characterName: characterData.name,
    mbti: characterData.mbti,
    profilePic: characterData.photo
  });

  // ìºë¦­í„° ìƒíƒœ ë¡œë“œ
  const state = MultiCharacterState.getState(characterId);
  
  // ê¸°ì¡´ ëŒ€í™” íˆìŠ¤í† ë¦¬ ë¡œë“œ
  const history = MultiCharacterState.getHistory(characterId);
  renderHistory(history);

  // íŠ¸ë¦¬ê±° ì—”ì§„ ì‹œì‘
  startTriggerEngine(characterId);
  
  // ì½ìŒ ì²˜ë¦¬
  ChatRoomManager.markAsRead(characterId);
}

// ë©”ì‹œì§€ ì „ì†¡ ì‹œ
function sendMessage(message, isFromUser) {
  const characterId = getCharacterIdFromURL();

  // ëŒ€í™” íˆìŠ¤í† ë¦¬ì— ì¶”ê°€
  MultiCharacterState.addToHistory(characterId, {
    type: isFromUser ? 'user' : 'character',
    text: message
  });

  // ëŒ€í™”ë°© ë§ˆì§€ë§‰ ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
  ChatRoomManager.updateLastMessage(characterId, message, isFromUser);

  // ìœ ì € ë©”ì‹œì§€ë©´ ë§ˆì§€ë§‰ ì‘ë‹µ ì‹œê°„ ì—…ë°ì´íŠ¸
  if (isFromUser) {
    MultiCharacterState.updateLastReply(characterId);
  }
}

// ë’¤ë¡œê°€ê¸° ë²„íŠ¼
function goBack() {
  window.location.href = 'character-list-ui.html';
}
```

### episode-trigger-engine.js ìˆ˜ì •ì‚¬í•­:

```javascript
// ê° íŠ¸ë¦¬ê±° í´ë˜ìŠ¤ì˜ ìƒì„±ìì—ì„œ MultiCharacterState ì‚¬ìš©

class TimeBasedTrigger {
  constructor(characterId) {
    this.characterId = characterId;
    this.state = MultiCharacterState.getState(characterId);
    // ...
  }

  sendMessage(timeSlot) {
    const message = this.getRandomMessage(timeSlot);
    
    // ë©”ì‹œì§€ ì „ì†¡
    episodeDelivery.addToQueue({
      type: 'character_message',
      text: message,
      delay: 0
    });

    // ëŒ€í™”ë°© ì—…ë°ì´íŠ¸
    ChatRoomManager.updateLastMessage(this.characterId, message, false);
    
    this.saveLastSent(timeSlot);
  }
}
```

---

## âœ… ì™„ë£Œ ê¸°ì¤€

### í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸:
```
â–¡ character-list-ui.html ìƒì„±
  - ì¹´ì¹´ì˜¤í†¡ ìŠ¤íƒ€ì¼ UI
  - ëŒ€í™”ë°© ì¹´ë“œ í‘œì‹œ
  - ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ë°°ì§€
  - ê²€ìƒ‰ ê¸°ëŠ¥

â–¡ chat-room-manager.js ìƒì„±
  - ëŒ€í™”ë°© ìƒì„±/ì—…ë°ì´íŠ¸
  - ë§ˆì§€ë§‰ ë©”ì‹œì§€ ê´€ë¦¬
  - ì½ìŒ/ì•ˆì½ìŒ ì²˜ë¦¬
  - localStorage ì €ì¥

â–¡ multi-character-state.js ìƒì„±
  - ìºë¦­í„°ë³„ ë…ë¦½ ìƒíƒœ
  - í˜¸ê°ë„/ì• ì •ë„ ê´€ë¦¬
  - ëŒ€í™” íˆìŠ¤í† ë¦¬ ì €ì¥
  - í†µê³„ ê¸°ëŠ¥

â–¡ ê¸°ì¡´ ì‹œìŠ¤í…œ ì—°ë™
  - chat-ui.html URL íŒŒë¼ë¯¸í„°
  - ëŒ€í™”ë°© â†” ì±„íŒ… í™”ë©´ ì´ë™
  - íŠ¸ë¦¬ê±° ì—”ì§„ ì—°ë™

â–¡ ë©€í‹° ìºë¦­í„° í…ŒìŠ¤íŠ¸
  - 3ëª… ìºë¦­í„° ë™ì‹œ ì§„í–‰
  - ê°ê° ë‹¤ë¥¸ í˜¸ê°ë„
  - ë…ë¦½ì ì¸ ëŒ€í™” íˆìŠ¤í† ë¦¬
  - íŠ¸ë¦¬ê±° ë…ë¦½ ì‘ë™

â–¡ UI/UX
  - ëª¨ë°”ì¼ ë°˜ì‘í˜•
  - ì‹œê°„ í¬ë§·íŒ…
  - ì½ì§€ ì•Šì€ ë°°ì§€
  - ë¹ˆ ìƒíƒœ ì²˜ë¦¬
```

---

## ğŸ“¦ ìµœì¢… íŒŒì¼ êµ¬ì¡°

```
chatgame/
â”œâ”€â”€ character-list-ui.html (ì‹ ê·œ - ëŒ€í™”ë°© ëª©ë¡)
â”œâ”€â”€ chat-ui.html (ìˆ˜ì • - URL íŒŒë¼ë¯¸í„° ì²˜ë¦¬)
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ chat-room-manager.js (ì‹ ê·œ)
â”‚   â”œâ”€â”€ multi-character-state.js (ì‹ ê·œ)
â”‚   â”œâ”€â”€ character-state-manager.js (ê¸°ì¡´ - ë‹¨ì¼ ìºë¦­í„°ìš©, ìœ ì§€)
â”‚   â”œâ”€â”€ episode-trigger-engine.js (ìˆ˜ì •)
â”‚   â””â”€â”€ episode-delivery-system.js (ìœ ì§€)
â””â”€â”€ assets/
    â””â”€â”€ default-profile.png (ê¸°ë³¸ í”„ë¡œí•„ ì‚¬ì§„)
```

---

## ğŸš€ Git ì‘ì—…

### ì‘ì—… ì™„ë£Œ í›„:
```bash
# 1. íŒŒì¼ ìŠ¤í…Œì´ì§•
git add character-list-ui.html
git add js/chat-room-manager.js
git add js/multi-character-state.js
git add chat-ui.html
git add js/episode-trigger-engine.js

# 2. ì»¤ë°‹
git commit -m "Phase 1-C: ë©€í‹° ìºë¦­í„° ë™ì‹œ ì±„íŒ… ì‹œìŠ¤í…œ ì™„ì„±

- character-list-ui.html (ì¹´ì¹´ì˜¤í†¡ ìŠ¤íƒ€ì¼)
- chat-room-manager.js (ëŒ€í™”ë°© ê´€ë¦¬)
- multi-character-state.js (ìºë¦­í„°ë³„ ë…ë¦½ ìƒíƒœ)
- ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ë°°ì§€
- ëŒ€í™”ë°© ê²€ìƒ‰ ê¸°ëŠ¥
- ê¸°ì¡´ ì‹œìŠ¤í…œ ì™„ì „ ì—°ë™"

# 3. í‘¸ì‹œ
git push origin main
```

---

## ğŸ“ ì™„ë£Œ ë³´ê³  ì–‘ì‹

```markdown
Phase 1-C ì™„ë£Œ ë³´ê³ 

âœ… ìƒì„± íŒŒì¼:
- character-list-ui.html (~400ì¤„)
- js/chat-room-manager.js (~250ì¤„)
- js/multi-character-state.js (~300ì¤„)

âœ… ìˆ˜ì • íŒŒì¼:
- chat-ui.html (URL íŒŒë¼ë¯¸í„° ì²˜ë¦¬)
- js/episode-trigger-engine.js (ë©€í‹° ìºë¦­í„° ì§€ì›)

ğŸ§ª í…ŒìŠ¤íŠ¸ ê²°ê³¼:
- ëŒ€í™”ë°© ë¦¬ìŠ¤íŠ¸ UI: âœ… í†µê³¼
- ëŒ€í™”ë°© ê´€ë¦¬: âœ… í†µê³¼
- ë©€í‹° ìƒíƒœ ê´€ë¦¬: âœ… í†µê³¼
- ì½ìŒ/ì•ˆì½ìŒ: âœ… í†µê³¼
- ê²€ìƒ‰ ê¸°ëŠ¥: âœ… í†µê³¼
- ë…ë¦½ ì‘ë™: âœ… í†µê³¼

ğŸ“Š ì½”ë“œ í’ˆì§ˆ:
- ì´ ì½”ë“œ: ~950ì¤„
- ì£¼ì„ í¬í•¨: 80%+
- ì—ëŸ¬ ì²˜ë¦¬: ì™„ë£Œ
- ëª¨ë°”ì¼ ë°˜ì‘í˜•: ì™„ë£Œ

ğŸ”„ Git:
- ì»¤ë°‹: "Phase 1-C: ë©€í‹° ìºë¦­í„° ë™ì‹œ ì±„íŒ… ì‹œìŠ¤í…œ ì™„ì„±"
- í‘¸ì‹œ: ì™„ë£Œ
- Vercel ë°°í¬: ìë™ ì™„ë£Œ

ğŸ¯ ë‹¤ìŒ: Phase 1-D (í†µí•© í…ŒìŠ¤íŠ¸ ë° ë²„ê·¸ ìˆ˜ì •)
```

---

## ğŸ’¡ ê°œë°œ íŒ

### ë””ë²„ê¹…:
```javascript
// ì½˜ì†”ì—ì„œ í…ŒìŠ¤íŠ¸
ChatRoomManager.getAllChatRooms(); // ëª¨ë“  ëŒ€í™”ë°©
MultiCharacterState.getStatistics(); // í†µê³„
MultiCharacterState.getState('yuna_infp'); // íŠ¹ì • ìºë¦­í„° ìƒíƒœ
```

### ë”ë¯¸ ë°ì´í„° ìƒì„± (í…ŒìŠ¤íŠ¸ìš©):
```javascript
// 3ëª… ìºë¦­í„° ë”ë¯¸ ë°ì´í„°
ChatRoomManager.createOrUpdateRoom('yuna_infp', {
  characterName: 'ìœ¤ì•„',
  mbti: 'INFP',
  profilePic: 'assets/yuna.jpg',
  lastMessage: 'ì˜¤ë¹  ë­í•´?'
});

ChatRoomManager.createOrUpdateRoom('mina_enfp', {
  characterName: 'ë¯¸ë‚˜',
  mbti: 'ENFP',
  profilePic: 'assets/mina.jpg',
  lastMessage: 'ì˜¤ë¹ ~ ë†€ì•„ì¤˜!'
});

ChatRoomManager.createOrUpdateRoom('seoyeon_intj', {
  characterName: 'ì„œì—°',
  mbti: 'INTJ',
  profilePic: 'assets/seoyeon.jpg',
  lastMessage: 'ë…¼ë¬¸ ì½ëŠ” ì¤‘...'
});
```

---

## ğŸ¯ ìµœì¢… ëª©í‘œ

ì‚¬ìš©ìê°€ character-list-ui.htmlì— ì ‘ì†í•˜ë©´:
1. **ì¹´ì¹´ì˜¤í†¡ì²˜ëŸ¼ ëŒ€í™”ë°© ëª©ë¡ í‘œì‹œ** âœ¨
2. ê° ëŒ€í™”ë°©ë§ˆë‹¤ ë§ˆì§€ë§‰ ë©”ì‹œì§€/ì‹œê°„/ì•ˆ ì½ì€ ê°œìˆ˜
3. ëŒ€í™”ë°© í´ë¦­ â†’ í•´ë‹¹ ìºë¦­í„°ì™€ ì±„íŒ…
4. ì—¬ëŸ¬ ìºë¦­í„°ì™€ ë™ì‹œ ì±„íŒ… ê°€ëŠ¥
5. ê° ìºë¦­í„° ë…ë¦½ì ì¸ í˜¸ê°ë„/ìƒíƒœ ê´€ë¦¬

---

**ì‘ì—… ì‹œì‘í•˜ì! í™”ì´íŒ…! ğŸš€**
