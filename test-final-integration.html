<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ğŸ§ª ìµœì¢… í†µí•© í…ŒìŠ¤íŠ¸ v2.2.0</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            margin: 20px;
            background: #1e1e1e;
            color: #d4d4d4;
            line-height: 1.6;
        }
        
        .header {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #333;
            border-radius: 8px;
            background: #2d2d2d;
        }
        
        .test-section h3 {
            color: #569cd6;
            margin: 0 0 15px 0;
        }
        
        .success {
            color: #4ec9b0;
            background: rgba(78, 201, 176, 0.1);
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #4ec9b0;
        }
        
        .error {
            color: #f44747;
            background: rgba(244, 71, 71, 0.1);
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #f44747;
        }
        
        .warning {
            color: #ffcc02;
            background: rgba(255, 204, 2, 0.1);
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #ffcc02;
        }
        
        .info {
            color: #9cdcfe;
            background: rgba(156, 220, 254, 0.1);
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #9cdcfe;
        }
        
        .test-result {
            margin: 10px 0;
            padding: 8px 12px;
            border-radius: 4px;
            font-family: monospace;
        }
        
        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        pre {
            background: #1e1e1e;
            border: 1px solid #333;
            border-radius: 4px;
            padding: 12px;
            overflow-x: auto;
            font-size: 12px;
        }
        
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #667eea;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .stat-card {
            background: #333;
            padding: 15px;
            border-radius: 6px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #4ec9b0;
        }
        
        .stat-label {
            color: #cccccc;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ§ª ìµœì¢… í†µí•© í…ŒìŠ¤íŠ¸ ì‹œìŠ¤í…œ</h1>
        <p>MBTI ë¡œë§¨ìŠ¤ ì±„íŒ… ê²Œì„ v2.2.0 - ëª¨ë“  ëª¨ë“ˆ ê²€ì¦</p>
    </div>
    
    <div class="test-section">
        <h3>ğŸ® í…ŒìŠ¤íŠ¸ ì œì–´íŒ</h3>
        <button class="btn" onclick="runAllTests()">ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        <button class="btn" onclick="runCoreTests()">í•µì‹¬ ëª¨ë“ˆ í…ŒìŠ¤íŠ¸</button>
        <button class="btn" onclick="runGameTests()">ê²Œì„ ë¡œì§ í…ŒìŠ¤íŠ¸</button>
        <button class="btn" onclick="runIntegrationTests()">í†µí•© í…ŒìŠ¤íŠ¸</button>
        <button class="btn" onclick="runPerformanceTests()">ì„±ëŠ¥ í…ŒìŠ¤íŠ¸</button>
        <button class="btn" onclick="clearResults()">ê²°ê³¼ ì´ˆê¸°í™”</button>
    </div>

    <div id="results-container">
        <!-- í…ŒìŠ¤íŠ¸ ê²°ê³¼ê°€ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
    </div>

    <script type="module">
        // í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì»¨í…Œì´ë„ˆ
        const resultsContainer = document.getElementById('results-container');
        
        // í…ŒìŠ¤íŠ¸ í†µê³„
        let testStats = {
            total: 0,
            passed: 0,
            failed: 0,
            warnings: 0,
            startTime: null,
            endTime: null
        };

        // ì „ì—­ í•¨ìˆ˜ë“¤ ì •ì˜
        window.runAllTests = runAllTests;
        window.runCoreTests = runCoreTests;
        window.runGameTests = runGameTests;
        window.runIntegrationTests = runIntegrationTests;
        window.runPerformanceTests = runPerformanceTests;
        window.clearResults = clearResults;

        // ê²°ê³¼ ì´ˆê¸°í™”
        function clearResults() {
            resultsContainer.innerHTML = '';
            testStats = { total: 0, passed: 0, failed: 0, warnings: 0, startTime: null, endTime: null };
        }

        // í…ŒìŠ¤íŠ¸ ì„¹ì…˜ ì¶”ê°€
        function addTestSection(title, icon = 'ğŸ§ª') {
            const section = document.createElement('div');
            section.className = 'test-section';
            section.innerHTML = `<h3>${icon} ${title}</h3><div class="test-content"></div>`;
            resultsContainer.appendChild(section);
            return section.querySelector('.test-content');
        }

        // í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì¶”ê°€
        function addTestResult(container, message, type = 'info') {
            const result = document.createElement('div');
            result.className = `test-result ${type}`;
            result.innerHTML = message;
            container.appendChild(result);
            
            // í†µê³„ ì—…ë°ì´íŠ¸
            testStats.total++;
            if (type === 'success') testStats.passed++;
            else if (type === 'error') testStats.failed++;
            else if (type === 'warning') testStats.warnings++;
        }

        // í†µê³„ í‘œì‹œ
        function displayStats() {
            const duration = testStats.endTime - testStats.startTime;
            const statsSection = addTestSection('ğŸ“Š í…ŒìŠ¤íŠ¸ í†µê³„', 'ğŸ“Š');
            statsSection.innerHTML = `
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">${testStats.total}</div>
                        <div class="stat-label">ì´ í…ŒìŠ¤íŠ¸</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" style="color: #4ec9b0;">${testStats.passed}</div>
                        <div class="stat-label">ì„±ê³µ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" style="color: #f44747;">${testStats.failed}</div>
                        <div class="stat-label">ì‹¤íŒ¨</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" style="color: #ffcc02;">${testStats.warnings}</div>
                        <div class="stat-label">ê²½ê³ </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${duration}ms</div>
                        <div class="stat-label">ì‹¤í–‰ ì‹œê°„</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">${Math.round((testStats.passed / testStats.total) * 100)}%</div>
                        <div class="stat-label">ì„±ê³µë¥ </div>
                    </div>
                </div>
            `;
        }

        // ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
        async function runAllTests() {
            clearResults();
            testStats.startTime = Date.now();
            
            addTestResult(addTestSection('ğŸ¯ í…ŒìŠ¤íŠ¸ ì‹œì‘'), 'ì „ì²´ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...', 'info');
            
            await runCoreTests();
            await runGameTests();
            await runIntegrationTests();
            await runPerformanceTests();
            
            testStats.endTime = Date.now();
            displayStats();
            
            addTestResult(addTestSection('âœ… í…ŒìŠ¤íŠ¸ ì™„ë£Œ'), 'ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        }

        // í•µì‹¬ ëª¨ë“ˆ í…ŒìŠ¤íŠ¸
        async function runCoreTests() {
            const container = addTestSection('ğŸ—ï¸ í•µì‹¬ ëª¨ë“ˆ í…ŒìŠ¤íŠ¸');
            
            // 1. ì•„í‚¤í…ì²˜ ëª¨ë“ˆ í…ŒìŠ¤íŠ¸
            try {
                const gameArch = await import('./modules/core/architecture.js');
                if (gameArch.default) {
                    addTestResult(container, 'âœ… architecture.js ëª¨ë“ˆ ë¡œë“œ ì„±ê³µ', 'success');
                    
                    if (gameArch.default.initialized) {
                        addTestResult(container, 'âœ… GameArchitecture ì´ˆê¸°í™” ìƒíƒœ í™•ì¸', 'success');
                    } else {
                        await gameArch.default.initialize();
                        addTestResult(container, 'âœ… GameArchitecture ì´ˆê¸°í™” ì™„ë£Œ', 'success');
                    }
                } else {
                    throw new Error('GameArchitecture ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                }
            } catch (error) {
                addTestResult(container, `âŒ architecture.js í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
            
            // 2. ìŠ¤í‚¤ë§ˆ ëª¨ë“ˆ í…ŒìŠ¤íŠ¸
            try {
                const DataSchema = await import('./modules/core/schema.js');
                if (DataSchema.default) {
                    addTestResult(container, 'âœ… schema.js ëª¨ë“ˆ ë¡œë“œ ì„±ê³µ', 'success');
                    
                    const testSchema = DataSchema.default.createDefault('gameState');
                    if (testSchema && typeof testSchema === 'object') {
                        addTestResult(container, 'âœ… ê¸°ë³¸ ê²Œì„ ìƒíƒœ ìŠ¤í‚¤ë§ˆ ìƒì„± ì„±ê³µ', 'success');
                    } else {
                        throw new Error('ê²Œì„ ìƒíƒœ ìŠ¤í‚¤ë§ˆ ìƒì„± ì‹¤íŒ¨');
                    }
                } else {
                    throw new Error('DataSchema ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                }
            } catch (error) {
                addTestResult(container, `âŒ schema.js í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
            
            await new Promise(resolve => setTimeout(resolve, 500));
        }

        // ê²Œì„ ë¡œì§ í…ŒìŠ¤íŠ¸
        async function runGameTests() {
            const container = addTestSection('ğŸ® ê²Œì„ ë¡œì§ í…ŒìŠ¤íŠ¸');
            
            // 1. ì„ íƒì§€ ë¡œì§ í…ŒìŠ¤íŠ¸
            try {
                const choiceLogic = await import('./modules/game/choice-logic.js');
                if (choiceLogic.default) {
                    addTestResult(container, 'âœ… choice-logic.js ëª¨ë“ˆ ë¡œë“œ ì„±ê³µ', 'success');
                    
                    // í…ŒìŠ¤íŠ¸ ì„ íƒì§€ ì²˜ë¦¬
                    const testChoice = {
                        choiceIndex: 0,
                        choiceText: 'í…ŒìŠ¤íŠ¸ ì„ íƒ',
                        affectionImpact: 2
                    };
                    const testGameState = { affection: 50 };
                    
                    if (choiceLogic.default.processChoice) {
                        const result = await choiceLogic.default.processChoice(testChoice, testGameState);
                        if (result && result.success) {
                            addTestResult(container, 'âœ… ì„ íƒì§€ ì²˜ë¦¬ ë¡œì§ í…ŒìŠ¤íŠ¸ ì„±ê³µ', 'success');
                        } else {
                            addTestResult(container, 'âš ï¸ ì„ íƒì§€ ì²˜ë¦¬ ê²°ê³¼ê°€ ì˜ˆìƒê³¼ ë‹¤ë¦„', 'warning');
                        }
                    } else {
                        addTestResult(container, 'âš ï¸ processChoice ë©”ì„œë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'warning');
                    }
                } else {
                    throw new Error('ChoiceLogic ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                }
            } catch (error) {
                addTestResult(container, `âŒ choice-logic.js í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
            
            // 2. ììœ  ì±„íŒ… í…ŒìŠ¤íŠ¸
            try {
                const freeChat = await import('./modules/game/free-chat.js');
                if (freeChat.default) {
                    addTestResult(container, 'âœ… free-chat.js ëª¨ë“ˆ ë¡œë“œ ì„±ê³µ', 'success');
                    
                    if (freeChat.default.toggleFreeChatMode) {
                        freeChat.default.toggleFreeChatMode(true);
                        addTestResult(container, 'âœ… ììœ  ì±„íŒ… ëª¨ë“œ í† ê¸€ í…ŒìŠ¤íŠ¸ ì„±ê³µ', 'success');
                    } else {
                        addTestResult(container, 'âš ï¸ toggleFreeChatMode ë©”ì„œë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'warning');
                    }
                } else {
                    throw new Error('FreeChat ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                }
            } catch (error) {
                addTestResult(container, `âŒ free-chat.js í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
            
            // 3. ì—í”¼ì†Œë“œ í”Œë¡œìš° í…ŒìŠ¤íŠ¸
            try {
                const episodeFlow = await import('./modules/game/episode-flow.js');
                if (episodeFlow.default) {
                    addTestResult(container, 'âœ… episode-flow.js ëª¨ë“ˆ ë¡œë“œ ì„±ê³µ', 'success');
                    
                    if (episodeFlow.default.getCurrentProgress) {
                        const progress = episodeFlow.default.getCurrentProgress();
                        if (progress && typeof progress.progressPercent === 'number') {
                            addTestResult(container, `âœ… ì—í”¼ì†Œë“œ ì§„í–‰ë¥  ì¡°íšŒ ì„±ê³µ: ${progress.progressPercent}%`, 'success');
                        } else {
                            addTestResult(container, 'âš ï¸ ì—í”¼ì†Œë“œ ì§„í–‰ë¥  í˜•ì‹ì´ ì˜ˆìƒê³¼ ë‹¤ë¦„', 'warning');
                        }
                    } else {
                        addTestResult(container, 'âš ï¸ getCurrentProgress ë©”ì„œë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'warning');
                    }
                } else {
                    throw new Error('EpisodeFlow ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                }
            } catch (error) {
                addTestResult(container, `âŒ episode-flow.js í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
            
            await new Promise(resolve => setTimeout(resolve, 500));
        }

        // í†µí•© í…ŒìŠ¤íŠ¸
        async function runIntegrationTests() {
            const container = addTestSection('ğŸ”— í†µí•© í…ŒìŠ¤íŠ¸');
            
            // 1. ê´€ë¦¬ì íŒ¨ë„ í…ŒìŠ¤íŠ¸
            try {
                const adminPanel = await import('./modules/admin/admin-panel.js');
                if (adminPanel.default) {
                    addTestResult(container, 'âœ… admin-panel.js ëª¨ë“ˆ ë¡œë“œ ì„±ê³µ', 'success');
                    
                    if (adminPanel.default.getStatistics) {
                        const stats = adminPanel.default.getStatistics();
                        addTestResult(container, `âœ… ê´€ë¦¬ì í†µê³„ ì¡°íšŒ ì„±ê³µ (ì‹œë‚˜ë¦¬ì˜¤: ${stats.totalScenarios}, ìºë¦­í„°: ${stats.totalCharacters})`, 'success');
                    } else {
                        addTestResult(container, 'âš ï¸ getStatistics ë©”ì„œë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'warning');
                    }
                } else {
                    throw new Error('AdminPanel ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                }
            } catch (error) {
                addTestResult(container, `âŒ admin-panel.js í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
            
            // 2. ê²Œì„ ì—”ì§„ í…ŒìŠ¤íŠ¸
            try {
                const gameEngine = await import('./modules/integration/game-engine.js');
                if (gameEngine.default) {
                    addTestResult(container, 'âœ… game-engine.js ëª¨ë“ˆ ë¡œë“œ ì„±ê³µ', 'success');
                    
                    // ì´ˆê¸°í™” ìƒíƒœ í™•ì¸
                    const initAttempts = 10;
                    let initialized = false;
                    
                    for (let i = 0; i < initAttempts; i++) {
                        if (gameEngine.default.initialized) {
                            initialized = true;
                            break;
                        }
                        await new Promise(resolve => setTimeout(resolve, 500));
                    }
                    
                    if (initialized) {
                        addTestResult(container, 'âœ… GameEngine ì´ˆê¸°í™” í™•ì¸', 'success');
                        
                        // ì—”ì§„ ìƒíƒœ ì²´í¬
                        if (gameEngine.default.getEngineStatus) {
                            const status = gameEngine.default.getEngineStatus();
                            const moduleCount = Object.keys(status.moduleStatus).length;
                            const activeModules = Object.values(status.moduleStatus).filter(s => s).length;
                            addTestResult(container, `âœ… ì—”ì§„ ìƒíƒœ ì¡°íšŒ ì„±ê³µ (ëª¨ë“ˆ: ${activeModules}/${moduleCount} í™œì„±)`, 'success');
                        }
                        
                        // ë²„ì „ ì •ë³´ í™•ì¸
                        if (gameEngine.default.getVersion) {
                            const version = gameEngine.default.getVersion();
                            addTestResult(container, `âœ… ë²„ì „ ì •ë³´ ì¡°íšŒ ì„±ê³µ: v${version.version}`, 'success');
                        }
                    } else {
                        addTestResult(container, 'âš ï¸ GameEngine ì´ˆê¸°í™” ëŒ€ê¸° ì¤‘...', 'warning');
                    }
                } else {
                    throw new Error('GameEngine ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                }
            } catch (error) {
                addTestResult(container, `âŒ game-engine.js í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
            
            // 3. API ì—°ê²° í…ŒìŠ¤íŠ¸
            try {
                const response = await fetch('/api/scenario?action=test');
                if (response.ok) {
                    const data = await response.json();
                    if (data.success) {
                        addTestResult(container, 'âœ… API ì„œë²„ ì—°ê²° í…ŒìŠ¤íŠ¸ ì„±ê³µ', 'success');
                    } else {
                        addTestResult(container, `âš ï¸ API ì‘ë‹µ í™•ì¸ í•„ìš”: ${data.message || 'Unknown response'}`, 'warning');
                    }
                } else {
                    addTestResult(container, `âš ï¸ API ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜: ${response.status}`, 'warning');
                }
            } catch (error) {
                addTestResult(container, `âŒ API ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
            
            await new Promise(resolve => setTimeout(resolve, 500));
        }

        // ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
        async function runPerformanceTests() {
            const container = addTestSection('âš¡ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸');
            
            // 1. ëª¨ë“ˆ ë¡œë“œ ì‹œê°„ ì¸¡ì •
            const startTime = performance.now();
            try {
                const modules = [
                    './modules/core/architecture.js',
                    './modules/core/schema.js',
                    './modules/game/choice-logic.js',
                    './modules/game/free-chat.js',
                    './modules/game/episode-flow.js',
                    './modules/admin/admin-panel.js',
                    './modules/integration/game-engine.js'
                ];
                
                const loadPromises = modules.map(async (modulePath) => {
                    const moduleStartTime = performance.now();
                    await import(modulePath);
                    return performance.now() - moduleStartTime;
                });
                
                const loadTimes = await Promise.all(loadPromises);
                const totalLoadTime = performance.now() - startTime;
                const avgLoadTime = loadTimes.reduce((a, b) => a + b, 0) / loadTimes.length;
                
                addTestResult(container, `âœ… ì „ì²´ ëª¨ë“ˆ ë¡œë“œ ì‹œê°„: ${totalLoadTime.toFixed(2)}ms`, 'success');
                addTestResult(container, `âœ… í‰ê·  ëª¨ë“ˆ ë¡œë“œ ì‹œê°„: ${avgLoadTime.toFixed(2)}ms`, 'success');
                
                if (totalLoadTime < 1000) {
                    addTestResult(container, 'âœ… ë¡œë“œ ì„±ëŠ¥: ìš°ìˆ˜ (1ì´ˆ ë¯¸ë§Œ)', 'success');
                } else if (totalLoadTime < 3000) {
                    addTestResult(container, 'âš ï¸ ë¡œë“œ ì„±ëŠ¥: ë³´í†µ (1-3ì´ˆ)', 'warning');
                } else {
                    addTestResult(container, 'âŒ ë¡œë“œ ì„±ëŠ¥: ëŠë¦¼ (3ì´ˆ ì´ˆê³¼)', 'error');
                }
                
            } catch (error) {
                addTestResult(container, `âŒ ëª¨ë“ˆ ë¡œë“œ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
            
            // 2. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ ì²´í¬
            if (performance.memory) {
                const memoryInfo = performance.memory;
                const usedMB = (memoryInfo.usedJSHeapSize / 1024 / 1024).toFixed(2);
                const limitMB = (memoryInfo.jsHeapSizeLimit / 1024 / 1024).toFixed(2);
                
                addTestResult(container, `ğŸ“Š ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: ${usedMB}MB / ${limitMB}MB`, 'info');
                
                if (memoryInfo.usedJSHeapSize < memoryInfo.jsHeapSizeLimit * 0.5) {
                    addTestResult(container, 'âœ… ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ : ì–‘í˜¸ (50% ë¯¸ë§Œ)', 'success');
                } else if (memoryInfo.usedJSHeapSize < memoryInfo.jsHeapSizeLimit * 0.8) {
                    addTestResult(container, 'âš ï¸ ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ : ì£¼ì˜ (50-80%)', 'warning');
                } else {
                    addTestResult(container, 'âŒ ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥ : ìœ„í—˜ (80% ì´ˆê³¼)', 'error');
                }
            } else {
                addTestResult(container, 'âš ï¸ ë©”ëª¨ë¦¬ ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'warning');
            }
            
            await new Promise(resolve => setTimeout(resolve, 300));
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸° ë©”ì‹œì§€ í‘œì‹œ
        document.addEventListener('DOMContentLoaded', () => {
            const container = addTestSection('ğŸš€ ì‹œìŠ¤í…œ ì¤€ë¹„');
            addTestResult(container, 'ìµœì¢… í†µí•© í…ŒìŠ¤íŠ¸ ì‹œìŠ¤í…œì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
            addTestResult(container, 'ìœ„ì˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•˜ì„¸ìš”.', 'info');
        });
    </script>
</body>
</html>