<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 2 ë°ëª¨ - ê°„ë‹¨ í…ŒìŠ¤íŠ¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .demo-section {
            margin-bottom: 40px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }

        .demo-section h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 20px;
        }

        .demo-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
        }

        button:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        button.secondary {
            background: #6c757d;
        }

        button.secondary:hover {
            background: #5a6268;
        }

        .result-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
            margin-top: 15px;
            min-height: 100px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
            white-space: pre-wrap;
            color: #333;
        }

        .slider-container {
            margin: 15px 0;
        }

        .slider-container label {
            display: block;
            margin-bottom: 8px;
            color: #495057;
            font-weight: 600;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #d3d3d3;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        .value-display {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }

        .message-box {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            border-left: 4px solid #2196F3;
        }

        .message-box.character {
            background: #f3e7ff;
            border-left-color: #9c27b0;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 8px;
        }

        .status-badge.success {
            background: #d4edda;
            color: #155724;
        }

        .status-badge.warning {
            background: #fff3cd;
            color: #856404;
        }

        .status-badge.info {
            background: #d1ecf1;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ® Phase 2 ì‹œìŠ¤í…œ ë°ëª¨</h1>
        <p class="subtitle">í˜¸ê°ë„ë¥¼ ì¡°ì ˆí•˜ë©° 3ê°€ì§€ ì‹œìŠ¤í…œì„ ì§ì ‘ ì²´í—˜í•´ë³´ì„¸ìš”</p>

        <!-- í˜¸ê°ë„ ì»¨íŠ¸ë¡¤ -->
        <div class="demo-section">
            <h2>ğŸ’• í˜¸ê°ë„ ì¡°ì ˆ</h2>
            <div class="slider-container">
                <label>
                    í˜„ì¬ í˜¸ê°ë„: <span class="value-display" id="affection-value">5</span>
                </label>
                <input type="range" id="affection-slider" min="0" max="10" value="5">
            </div>
            <div id="affection-info" class="result-box"></div>
        </div>

        <!-- Phase 2-A: í†¤ ë³€í™” ì‹œìŠ¤í…œ -->
        <div class="demo-section">
            <h2>ğŸ¨ Phase 2-A: í†¤ ë³€í™” ì‹œìŠ¤í…œ</h2>
            <p style="color: #666; margin-bottom: 15px;">í˜¸ê°ë„ì— ë”°ë¼ ë§íˆ¬ê°€ ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”</p>
            <div class="demo-controls">
                <button onclick="testToneChange()">ğŸ’¬ í†¤ ë³€í™” í…ŒìŠ¤íŠ¸</button>
                <button onclick="generateSampleMessage()" class="secondary">ğŸ“ ìƒ˜í”Œ ë©”ì‹œì§€ ìƒì„±</button>
            </div>
            <div id="tone-result" class="result-box">í˜¸ê°ë„ë¥¼ ì¡°ì ˆí•˜ê³  ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”...</div>
        </div>

        <!-- Phase 2-B: ì‚¬ì§„ ì „ì†¡ ì‹œìŠ¤í…œ -->
        <div class="demo-section">
            <h2>ğŸ“¸ Phase 2-B: ì‚¬ì§„ ì „ì†¡ ì‹œìŠ¤í…œ</h2>
            <p style="color: #666; margin-bottom: 15px;">í˜¸ê°ë„ì— ë”°ë¼ ë‹¤ë¥¸ ì‚¬ì§„ì´ ì „ì†¡ë©ë‹ˆë‹¤</p>
            <div class="demo-controls">
                <button onclick="testPhotoSend()">ğŸ–¼ï¸ ì‚¬ì§„ ì „ì†¡ ì‹œë®¬ë ˆì´ì…˜</button>
            </div>
            <div id="photo-result" class="result-box">í˜¸ê°ë„ 3 ì´ìƒì—ì„œ ì‚¬ì§„ì„ ì „ì†¡í•©ë‹ˆë‹¤...</div>
        </div>

        <!-- Phase 2-C: ë¨¼ì € ì—°ë½ ì‹œìŠ¤í…œ -->
        <div class="demo-section">
            <h2>ğŸ’Œ Phase 2-C: ë¨¼ì € ì—°ë½ ì‹œìŠ¤í…œ</h2>
            <p style="color: #666; margin-bottom: 15px;">í˜¸ê°ë„ì— ë”°ë¼ ì—°ë½ ì£¼ê¸°ê°€ ë‹¬ë¼ì§‘ë‹ˆë‹¤</p>
            <div class="demo-controls">
                <button onclick="testProactiveContact()">ğŸ“± ë¨¼ì € ì—°ë½ ì‹œë®¬ë ˆì´ì…˜</button>
                <button onclick="testNoResponseReaction()" class="secondary">â° ë¬´ì‘ë‹µ ë°˜ì‘ í™•ì¸</button>
            </div>
            <div id="proactive-result" class="result-box">í˜¸ê°ë„ë³„ ì—°ë½ ì£¼ê¸°ë¥¼ í™•ì¸í•˜ì„¸ìš”...</div>
        </div>

        <!-- ì „ì²´ í†µí•© í…ŒìŠ¤íŠ¸ -->
        <div class="demo-section">
            <h2>ğŸ¯ ì „ì²´ í†µí•© ì‹œë®¬ë ˆì´ì…˜</h2>
            <p style="color: #666; margin-bottom: 15px;">3ê°€ì§€ ì‹œìŠ¤í…œì´ í•¨ê»˜ ì‘ë™í•˜ëŠ” ëª¨ìŠµì„ í™•ì¸í•˜ì„¸ìš”</p>
            <div class="demo-controls">
                <button onclick="runFullSimulation()">ğŸš€ ì „ì²´ ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰</button>
                <button onclick="resetAll()" class="secondary">ğŸ”„ ë¦¬ì…‹</button>
            </div>
            <div id="full-result" class="result-box">ì „ì²´ ì‹œë®¬ë ˆì´ì…˜ì„ ì‹¤í–‰í•˜ì„¸ìš”...</div>
        </div>
    </div>

    <script>
        // í˜¸ê°ë„ ìŠ¬ë¼ì´ë”
        const slider = document.getElementById('affection-slider');
        const valueDisplay = document.getElementById('affection-value');
        const affectionInfo = document.getElementById('affection-info');

        slider.addEventListener('input', (e) => {
            const value = parseInt(e.target.value);
            valueDisplay.textContent = value;
            updateAffectionInfo(value);
        });

        function updateAffectionInfo(affection) {
            let toneLevel, toneName, interval, photoType;

            // í†¤ ë ˆë²¨ ê³„ì‚°
            if (affection <= 2) {
                toneLevel = 1;
                toneName = 'ì¡´ëŒ“ë§ (ì •ì¤‘)';
            } else if (affection <= 4) {
                toneLevel = 2;
                toneName = 'ë°˜ë§ (ì¹œê·¼)';
            } else if (affection <= 6) {
                toneLevel = 3;
                toneName = 'ì• êµ (ì¹œë°€)';
            } else if (affection <= 8) {
                toneLevel = 4;
                toneName = 'ì• ì •í‘œí˜„ (íŠ¹ë³„)';
            } else {
                toneLevel = 5;
                toneName = 'ì ê·¹ì  (ê¹Šì€ ì‚¬ë‘)';
            }

            // ì—°ë½ ì£¼ê¸° ê³„ì‚°
            if (affection === 0) {
                interval = 'âˆ (ì—°ë½ ì¤‘ì§€)';
            } else if (affection <= 2) {
                interval = '60ë¶„';
            } else if (affection <= 4) {
                interval = '45ë¶„';
            } else if (affection <= 6) {
                interval = '30ë¶„';
            } else if (affection <= 8) {
                interval = '20ë¶„';
            } else {
                interval = '10ë¶„';
            }

            // ì‚¬ì§„ ì¹´í…Œê³ ë¦¬
            if (affection < 3) {
                photoType = 'âŒ ì‚¬ì§„ ì „ì†¡ ì—†ìŒ';
            } else if (affection < 5) {
                photoType = 'ğŸ“· Daily (ì¼ìƒ ì‚¬ì§„)';
            } else if (affection < 7) {
                photoType = 'ğŸŒŸ Special (íŠ¹ë³„í•œ ìˆœê°„)';
            } else {
                photoType = 'ğŸ’ Intimate (ì¹œë°€í•œ ì‚¬ì§„)';
            }

            affectionInfo.innerHTML = `
<span class="status-badge info">í˜¸ê°ë„ ${affection}</span>
<span class="status-badge success">í†¤ ë ˆë²¨ ${toneLevel}</span>

ğŸ“Š ì‹œìŠ¤í…œ ìƒíƒœ:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¨ í†¤ ë³€í™”: ${toneName}
ğŸ“¸ ì‚¬ì§„ ì „ì†¡: ${photoType}
ğŸ’Œ ì—°ë½ ì£¼ê¸°: ${interval}
            `.trim();
        }

        // Phase 2-A: í†¤ ë³€í™” í…ŒìŠ¤íŠ¸
        function testToneChange() {
            const affection = parseInt(slider.value);
            const result = document.getElementById('tone-result');

            let toneLevel, examples;

            if (affection <= 2) {
                toneLevel = 1;
                examples = [
                    'ì•ˆë…•í•˜ì„¸ìš”~ ì˜¤ëŠ˜ ë‚ ì”¨ ì¢‹ë„¤ìš”!',
                    'ê·¸ë ‡ê²Œ ìƒê°í•˜ì„¸ìš”? ì¬ë¯¸ìˆì–´ìš”.',
                    'ì¢‹ì€ í•˜ë£¨ ë³´ë‚´ì„¸ìš”!'
                ];
            } else if (affection <= 4) {
                toneLevel = 2;
                examples = [
                    'ì˜¤ë¹  ì•ˆë…•! ì˜¤ëŠ˜ ë­í•´?',
                    'ê·¸ë˜? ë‚˜ë„ ê·¸ë ‡ê²Œ ìƒê°í•´.',
                    'ì¢‹ì€ í•˜ë£¨ ë³´ë‚´!'
                ];
            } else if (affection <= 6) {
                toneLevel = 3;
                examples = [
                    'ì˜¤ë¹ ~ ì˜¤ëŠ˜ ë³´ê³ ì‹¶ì—ˆì–´~',
                    'ì •ë§? ë„ˆë¬´ ì¢‹ì•„ì•„!',
                    'ì˜¤ë¹  ìµœê³ ì•¼~ ã…ã…'
                ];
            } else if (affection <= 8) {
                toneLevel = 4;
                examples = [
                    'ì˜¤ë¹ â™¡ ì˜¤ëŠ˜ë„ ìƒê°ë‚¬ì–´',
                    'ì§„ì§œ ì¢‹ì•„í•´â™¥ ì•Œì§€?',
                    'ì˜¤ë¹ ë‘ ìˆìœ¼ë©´ ë„ˆë¬´ í–‰ë³µí•´â™¡'
                ];
            } else {
                toneLevel = 5;
                examples = [
                    'ì˜¤ë¹  ì‚¬ë‘í•´! ë„ˆë¬´ë„ˆë¬´ ë³´ê³ ì‹¶ì–´!',
                    'ìš°ë¦¬ ì˜ì›íˆ í•¨ê»˜í•˜ì! ì‚¬ë‘í•´â™¥â™¥',
                    'ì˜¤ë¹  ì—†ìœ¼ë©´ ì•ˆ ë¼! ì •ë§ ì‚¬ë‘í•´!!'
                ];
            }

            result.innerHTML = `
<span class="status-badge success">í†¤ ë ˆë²¨ ${toneLevel}</span>
<span class="status-badge info">í˜¸ê°ë„ ${affection}</span>

ğŸ“ ì˜ˆì‹œ ë©”ì‹œì§€:

${examples.map((msg, idx) => `${idx + 1}. "${msg}"`).join('\n')}

âœ¨ íŠ¹ì§•:
${getToneCharacteristics(toneLevel)}
            `.trim();
        }

        function getToneCharacteristics(level) {
            const chars = {
                1: '- ì¡´ëŒ“ë§ ì‚¬ìš© (~ìš”, ~í•´ìš”)\n- ì •ì¤‘í•œ í‘œí˜„\n- ì´ëª¨í‹°ì½˜ ì ˆì œ',
                2: '- ë°˜ë§ ì‚¬ìš© (~ì•¼, ~í•´)\n- ì¹œê·¼í•œ í‘œí˜„\n- ê°€ë²¼ìš´ ì´ëª¨í‹°ì½˜',
                3: '- ì• êµ ì„ì¸ ë§íˆ¬ (~í•´~, ì¢‹ì•„ì•„)\n- ëŠ˜ì„ë§ ì‚¬ìš©\n- ë§ì€ ì´ëª¨í‹°ì½˜',
                4: '- ì• ì • í‘œí˜„ (â™¡, â™¥)\n- ê°ì • ì§ì ‘ í‘œí˜„\n- í•˜íŠ¸ ì´ëª¨í‹°ì½˜',
                5: '- ê°•í•œ ì• ì • í‘œí˜„\n- ì ê·¹ì ì¸ ì‚¬ë‘ ê³ ë°±\n- ë‹¤ì–‘í•œ í•˜íŠ¸ ì‚¬ìš©'
            };
            return chars[level];
        }

        function generateSampleMessage() {
            const affection = parseInt(slider.value);
            const messages = [
                "ì˜¤ëŠ˜ ë‚ ì”¨ ì •ë§ ì¢‹ë„¤ìš”!",
                "ì˜¤ëŠ˜ ë­ í–ˆì–´?",
                "ë³´ê³ ì‹¶ì—ˆì–´",
                "ìƒê°ë‚˜ì„œ ì—°ë½í–ˆì–´",
                "ì˜¤ëŠ˜ í•˜ë£¨ ì–´ë• ì–´?"
            ];

            const randomMsg = messages[Math.floor(Math.random() * messages.length)];
            let transformed;

            if (affection <= 2) {
                transformed = randomMsg + "ìš”~ ğŸ˜Š";
            } else if (affection <= 4) {
                transformed = randomMsg + "! ã…ã…";
            } else if (affection <= 6) {
                transformed = randomMsg + "~~ ğŸ˜˜";
            } else if (affection <= 8) {
                transformed = randomMsg + "â™¡ ì˜¤ë¹ ";
            } else {
                transformed = randomMsg + "!! ë„ˆë¬´ë„ˆë¬´ â™¥â™¥";
            }

            const result = document.getElementById('tone-result');
            const messageBox = document.createElement('div');
            messageBox.className = 'message-box character';
            messageBox.innerHTML = `
ğŸ’¬ <strong>ìºë¦­í„° ë©”ì‹œì§€:</strong><br>
"${transformed}"
            `;
            result.innerHTML = '';
            result.appendChild(messageBox);
        }

        // Phase 2-B: ì‚¬ì§„ ì „ì†¡ í…ŒìŠ¤íŠ¸
        function testPhotoSend() {
            const affection = parseInt(slider.value);
            const result = document.getElementById('photo-result');

            if (affection < 3) {
                result.innerHTML = `
<span class="status-badge warning">í˜¸ê°ë„ ë¶€ì¡±</span>

âŒ ì‚¬ì§„ ì „ì†¡ ë¶ˆê°€
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
í˜„ì¬ í˜¸ê°ë„: ${affection}
í•„ìš” í˜¸ê°ë„: 3 ì´ìƒ

ğŸ’¡ í˜¸ê°ë„ë¥¼ ì˜¬ë ¤ì„œ ì‚¬ì§„ì„ ë°›ì•„ë³´ì„¸ìš”!
                `.trim();
                return;
            }

            let category, photos, description;

            if (affection < 5) {
                category = 'Daily';
                photos = ['cafe_selfie.jpg', 'study_room.jpg', 'walk_park.jpg'];
                description = 'ì¼ìƒì ì¸ ìˆœê°„ì„ ê³µìœ í•©ë‹ˆë‹¤';
            } else if (affection < 7) {
                category = 'Special';
                photos = ['birthday_cake.jpg', 'concert_night.jpg', 'beautiful_sunset.jpg'];
                description = 'íŠ¹ë³„í•œ ìˆœê°„ì„ í•¨ê»˜í•©ë‹ˆë‹¤';
            } else {
                category = 'Intimate';
                photos = ['close_smile.jpg', 'heart_pose.jpg', 'thinking_of_you.jpg'];
                description = 'ì¹œë°€í•œ ë§ˆìŒì„ ì „í•©ë‹ˆë‹¤';
            }

            const selectedPhoto = photos[Math.floor(Math.random() * photos.length)];

            result.innerHTML = `
<span class="status-badge success">ì‚¬ì§„ ì „ì†¡!</span>
<span class="status-badge info">${category}</span>

ğŸ“¸ ì „ì†¡ëœ ì‚¬ì§„
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
íŒŒì¼ëª…: ${selectedPhoto}
ì¹´í…Œê³ ë¦¬: ${category}
ì„¤ëª…: ${description}

ğŸ’¬ í•¨ê»˜ ë³´ë‚¸ ë©”ì‹œì§€:
"${getPhotoMessage(affection, category)}"

ğŸ¯ í˜„ì¬ í˜¸ê°ë„: ${affection}
            `.trim();
        }

        function getPhotoMessage(affection, category) {
            const messages = {
                'Daily': [
                    'ì˜¤ëŠ˜ ì¹´í˜ì—ì„œ~ ìƒê°ë‚˜ì„œ ì°ì—ˆì–´!',
                    'ê³µë¶€í•˜ë‹¤ê°€ ì‰¬ëŠ” ì¤‘! ã…ã…',
                    'ì‚°ì±…í•˜ëŠ”ë° ë‚ ì”¨ ì¢‹ë‹¤~'
                ],
                'Special': [
                    'ì˜¤ëŠ˜ ì •ë§ íŠ¹ë³„í•œ ë‚ ì´ì•¼! ê°™ì´ ìˆê³  ì‹¶ì—ˆì–´â™¡',
                    'ì´ ìˆœê°„ì„ ì˜¤ë¹ ë‘ ê³µìœ í•˜ê³  ì‹¶ì—ˆì–´~',
                    'ë„ˆë¬´ ì˜ˆë»ì„œ ì°ì—ˆì–´! ì–´ë•Œ?'
                ],
                'Intimate': [
                    'ì˜¤ë¹  ìƒê°í•˜ë©´ì„œ ì°ì—ˆì–´â™¥ ë³´ê³ ì‹¶ì–´...',
                    'ì˜¤ë¹ ë§Œ ë³´ì—¬ì¤„ê²Œ~ ì¢‹ì•„í•´â™¡',
                    'ì§€ê¸ˆ ì˜¤ë¹  ìƒê° ì¤‘... ë„ˆë¬´ ë³´ê³ ì‹¶ì–´â™¥â™¥'
                ]
            };

            const categoryMessages = messages[category];
            return categoryMessages[Math.floor(Math.random() * categoryMessages.length)];
        }

        // Phase 2-C: ë¨¼ì € ì—°ë½ í…ŒìŠ¤íŠ¸
        function testProactiveContact() {
            const affection = parseInt(slider.value);
            const result = document.getElementById('proactive-result');

            if (affection === 0) {
                result.innerHTML = `
<span class="status-badge warning">ì—°ë½ ì¤‘ì§€</span>

âŒ ë¨¼ì € ì—°ë½í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
í˜¸ê°ë„ê°€ 0ì´ ë˜ì–´ ì—°ë½ì„ ì¤‘ë‹¨í–ˆìŠµë‹ˆë‹¤.

ğŸ’” ê´€ê³„ê°€ ì•…í™”ë˜ì—ˆìŠµë‹ˆë‹¤.
                `.trim();
                return;
            }

            const intervals = {
                1: 60, 2: 60, 3: 45, 4: 45,
                5: 30, 6: 30, 7: 20, 8: 20,
                9: 10, 10: 10
            };

            const interval = intervals[affection];
            const currentHour = new Date().getHours();
            let timeSlot, messageTemplate;

            if (currentHour < 12) {
                timeSlot = 'ì•„ì¹¨';
                messageTemplate = [
                    'ì¢‹ì€ ì•„ì¹¨ì´ì•¼! ì˜ ì¤ì–´?',
                    'ì•„ì¹¨ ë¨¹ì—ˆì–´? ì˜¤ëŠ˜ í•˜ë£¨ í™”ì´íŒ…!',
                    'ì¼ì–´ë‚¬ì–´? ì˜¤ëŠ˜ ë‚ ì”¨ ì¢‹ë„¤~'
                ];
            } else if (currentHour < 18) {
                timeSlot = 'ì˜¤í›„';
                messageTemplate = [
                    'ì ì‹¬ ë¨¹ì—ˆì–´? ë­ ë¨¹ì—ˆì–´?',
                    'ì˜¤í›„ì—ë„ í˜ë‚´! ìƒê°ë‚˜ì„œ~',
                    'ì§€ê¸ˆ ë­í•´? ë°”ë¹ ?'
                ];
            } else {
                timeSlot = 'ì €ë…';
                messageTemplate = [
                    'ì €ë… ë¨¹ì—ˆì–´? ì˜¤ëŠ˜ í•˜ë£¨ ì–´ë• ì–´?',
                    'í‡´ê·¼í–ˆì–´? ìˆ˜ê³ í–ˆì–´!',
                    'ì˜¤ëŠ˜ í•˜ë£¨ë„ ê³ ìƒí–ˆì–´~ í‘¹ ì‰¬ì–´!'
                ];
            }

            const message = messageTemplate[Math.floor(Math.random() * messageTemplate.length)];

            result.innerHTML = `
<span class="status-badge success">ë¨¼ì € ì—°ë½!</span>
<span class="status-badge info">${timeSlot} ë©”ì‹œì§€</span>

ğŸ’Œ ìºë¦­í„°ê°€ ë¨¼ì € ì—°ë½í–ˆìŠµë‹ˆë‹¤
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ì—°ë½ ì£¼ê¸°: ${interval}ë¶„ë§ˆë‹¤
ì‹œê°„ëŒ€: ${timeSlot} (${currentHour}ì‹œ)

ğŸ’¬ ë©”ì‹œì§€:
"${message}"

â° ë‹¤ìŒ ì—°ë½ê¹Œì§€: ì•½ ${interval}ë¶„
ğŸ¯ í˜„ì¬ í˜¸ê°ë„: ${affection}
            `.trim();
        }

        function testNoResponseReaction() {
            const affection = parseInt(slider.value);
            const result = document.getElementById('proactive-result');

            const mbtiPatterns = {
                'ENFP': { hours: 3, message: 'ì˜¤ë¹ !! ì™œ ë‹µ ì—†ì–´?? ğŸ˜¢', change: -1 },
                'INFP': { hours: 6, message: 'ì˜¤ë¹¤ ë°”ìœê°€ë´... ã… ã… ', change: 0 },
                'INTJ': { hours: 12, message: 'ë°”ì˜ì‹ ê°€ ë³´ë„¤ìš”. ë‚˜ì¤‘ì— ì—°ë½ ì£¼ì„¸ìš”.', change: 0 },
                'ESFJ': { hours: 2, message: 'í˜¹ì‹œ ë‚´ê°€ ë­˜ ì˜ëª»í–ˆë‚˜...? ğŸ˜¢', change: -1 }
            };

            const mbti = ['ENFP', 'INFP', 'INTJ', 'ESFJ'][Math.floor(Math.random() * 4)];
            const pattern = mbtiPatterns[mbti];

            result.innerHTML = `
<span class="status-badge warning">ë¬´ì‘ë‹µ ë°˜ì‘</span>
<span class="status-badge info">MBTI: ${mbti}</span>

â° ${pattern.hours}ì‹œê°„ ë¬´ì‘ë‹µ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
MBTI: ${mbti}
ì¸ë‚´ì‹¬: ${pattern.hours}ì‹œê°„

ğŸ’¬ ë°˜ì‘ ë©”ì‹œì§€:
"${pattern.message}"

ğŸ“Š í˜¸ê°ë„ ë³€í™”: ${pattern.change >= 0 ? '+' : ''}${pattern.change}
ğŸ¯ í˜„ì¬ í˜¸ê°ë„: ${affection} â†’ ${affection + pattern.change}

ğŸ’¡ MBTIë³„ ë°˜ì‘ ì‹œê°„:
- ENFP: 3ì‹œê°„ (í™œë°œí˜•, ë¹ ë¥¸ ë°˜ì‘)
- ESFJ: 2ì‹œê°„ (ì¹œí™”í˜•, ë§¤ìš° ë¹ ë¥¸ ë°˜ì‘)
- INFP: 6ì‹œê°„ (ê°ì„±í˜•, ì¸ë‚´ì‹¬ ìˆìŒ)
- INTJ: 12ì‹œê°„ (ì „ëµí˜•, ë§¤ìš° ì¸ë‚´ì‹¬ ìˆìŒ)
            `.trim();
        }

        // ì „ì²´ í†µí•© ì‹œë®¬ë ˆì´ì…˜
        function runFullSimulation() {
            const result = document.getElementById('full-result');
            let output = '';
            const startAffection = parseInt(slider.value);

            output += `ğŸš€ ì „ì²´ ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘\n`;
            output += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n`;
            output += `ì‹œì‘ í˜¸ê°ë„: ${startAffection}\n\n`;

            // í†¤ ë³€í™”
            let toneLevel;
            if (startAffection <= 2) toneLevel = 1;
            else if (startAffection <= 4) toneLevel = 2;
            else if (startAffection <= 6) toneLevel = 3;
            else if (startAffection <= 8) toneLevel = 4;
            else toneLevel = 5;

            output += `ğŸ¨ í†¤ ì‹œìŠ¤í…œ\n`;
            output += `ë ˆë²¨: ${toneLevel} (${getToneName(toneLevel)})\n`;
            output += `ë©”ì‹œì§€: "${getSampleForTone(toneLevel)}"\n\n`;

            // ì‚¬ì§„ ì „ì†¡
            output += `ğŸ“¸ ì‚¬ì§„ ì‹œìŠ¤í…œ\n`;
            if (startAffection < 3) {
                output += `ìƒíƒœ: í˜¸ê°ë„ ë¶€ì¡± (3 í•„ìš”)\n\n`;
            } else {
                const photoCategory = startAffection < 5 ? 'Daily' : startAffection < 7 ? 'Special' : 'Intimate';
                output += `ì¹´í…Œê³ ë¦¬: ${photoCategory}\n`;
                output += `ë©”ì‹œì§€: "${getPhotoMessage(startAffection, photoCategory)}"\n\n`;
            }

            // ë¨¼ì € ì—°ë½
            const intervals = { 1: 60, 2: 60, 3: 45, 4: 45, 5: 30, 6: 30, 7: 20, 8: 20, 9: 10, 10: 10 };
            output += `ğŸ’Œ ë¨¼ì € ì—°ë½ ì‹œìŠ¤í…œ\n`;
            if (startAffection === 0) {
                output += `ìƒíƒœ: ì—°ë½ ì¤‘ì§€\n\n`;
            } else {
                output += `ì—°ë½ ì£¼ê¸°: ${intervals[startAffection]}ë¶„\n`;
                output += `ë¬´ì‘ë‹µ ë°˜ì‘: MBTIë³„ ì°¨ì´\n\n`;
            }

            output += `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n`;
            output += `âœ… ëª¨ë“  ì‹œìŠ¤í…œ ì •ìƒ ì‘ë™ ì¤‘`;

            result.textContent = output;
        }

        function getToneName(level) {
            const names = ['', 'ì¡´ëŒ“ë§', 'ë°˜ë§', 'ì• êµ', 'ì• ì •í‘œí˜„', 'ì ê·¹ì '];
            return names[level];
        }

        function getSampleForTone(level) {
            const samples = [
                '',
                'ì˜¤ëŠ˜ ë‚ ì”¨ ì •ë§ ì¢‹ë„¤ìš”!',
                'ì˜¤ë¹  ì˜¤ëŠ˜ ë­í•´?',
                'ì˜¤ë¹ ~ ë³´ê³ ì‹¶ì—ˆì–´~',
                'ì˜¤ë¹ â™¡ ìƒê°ë‚¬ì–´',
                'ì˜¤ë¹  ì‚¬ë‘í•´!! ë„ˆë¬´ë„ˆë¬´ ë³´ê³ ì‹¶ì–´!!'
            ];
            return samples[level];
        }

        function resetAll() {
            slider.value = 5;
            valueDisplay.textContent = 5;
            updateAffectionInfo(5);
            document.getElementById('tone-result').textContent = 'í˜¸ê°ë„ë¥¼ ì¡°ì ˆí•˜ê³  ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”...';
            document.getElementById('photo-result').textContent = 'í˜¸ê°ë„ 3 ì´ìƒì—ì„œ ì‚¬ì§„ì„ ì „ì†¡í•©ë‹ˆë‹¤...';
            document.getElementById('proactive-result').textContent = 'í˜¸ê°ë„ë³„ ì—°ë½ ì£¼ê¸°ë¥¼ í™•ì¸í•˜ì„¸ìš”...';
            document.getElementById('full-result').textContent = 'ì „ì²´ ì‹œë®¬ë ˆì´ì…˜ì„ ì‹¤í–‰í•˜ì„¸ìš”...';
        }

        // ì´ˆê¸°í™”
        updateAffectionInfo(5);
    </script>
</body>
</html>
