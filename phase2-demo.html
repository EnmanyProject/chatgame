<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 2 데모 - 간단 테스트</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 28px;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .demo-section {
            margin-bottom: 40px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }

        .demo-section h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 20px;
        }

        .demo-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
        }

        button:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        button.secondary {
            background: #6c757d;
        }

        button.secondary:hover {
            background: #5a6268;
        }

        .result-box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #dee2e6;
            margin-top: 15px;
            min-height: 100px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
            white-space: pre-wrap;
            color: #333;
        }

        .slider-container {
            margin: 15px 0;
        }

        .slider-container label {
            display: block;
            margin-bottom: 8px;
            color: #495057;
            font-weight: 600;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #d3d3d3;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        .value-display {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }

        .message-box {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            border-left: 4px solid #2196F3;
        }

        .message-box.character {
            background: #f3e7ff;
            border-left-color: #9c27b0;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 8px;
        }

        .status-badge.success {
            background: #d4edda;
            color: #155724;
        }

        .status-badge.warning {
            background: #fff3cd;
            color: #856404;
        }

        .status-badge.info {
            background: #d1ecf1;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎮 Phase 2 시스템 데모</h1>
        <p class="subtitle">호감도를 조절하며 3가지 시스템을 직접 체험해보세요</p>

        <!-- 호감도 컨트롤 -->
        <div class="demo-section">
            <h2>💕 호감도 조절</h2>
            <div class="slider-container">
                <label>
                    현재 호감도: <span class="value-display" id="affection-value">5</span>
                </label>
                <input type="range" id="affection-slider" min="0" max="10" value="5">
            </div>
            <div id="affection-info" class="result-box"></div>
        </div>

        <!-- Phase 2-A: 톤 변화 시스템 -->
        <div class="demo-section">
            <h2>🎨 Phase 2-A: 톤 변화 시스템</h2>
            <p style="color: #666; margin-bottom: 15px;">호감도에 따라 말투가 어떻게 변하는지 확인하세요</p>
            <div class="demo-controls">
                <button onclick="testToneChange()">💬 톤 변화 테스트</button>
                <button onclick="generateSampleMessage()" class="secondary">📝 샘플 메시지 생성</button>
            </div>
            <div id="tone-result" class="result-box">호감도를 조절하고 버튼을 클릭하세요...</div>
        </div>

        <!-- Phase 2-B: 사진 전송 시스템 -->
        <div class="demo-section">
            <h2>📸 Phase 2-B: 사진 전송 시스템</h2>
            <p style="color: #666; margin-bottom: 15px;">호감도에 따라 다른 사진이 전송됩니다</p>
            <div class="demo-controls">
                <button onclick="testPhotoSend()">🖼️ 사진 전송 시뮬레이션</button>
            </div>
            <div id="photo-result" class="result-box">호감도 3 이상에서 사진을 전송합니다...</div>
        </div>

        <!-- Phase 2-C: 먼저 연락 시스템 -->
        <div class="demo-section">
            <h2>💌 Phase 2-C: 먼저 연락 시스템</h2>
            <p style="color: #666; margin-bottom: 15px;">호감도에 따라 연락 주기가 달라집니다</p>
            <div class="demo-controls">
                <button onclick="testProactiveContact()">📱 먼저 연락 시뮬레이션</button>
                <button onclick="testNoResponseReaction()" class="secondary">⏰ 무응답 반응 확인</button>
            </div>
            <div id="proactive-result" class="result-box">호감도별 연락 주기를 확인하세요...</div>
        </div>

        <!-- 전체 통합 테스트 -->
        <div class="demo-section">
            <h2>🎯 전체 통합 시뮬레이션</h2>
            <p style="color: #666; margin-bottom: 15px;">3가지 시스템이 함께 작동하는 모습을 확인하세요</p>
            <div class="demo-controls">
                <button onclick="runFullSimulation()">🚀 전체 시뮬레이션 실행</button>
                <button onclick="resetAll()" class="secondary">🔄 리셋</button>
            </div>
            <div id="full-result" class="result-box">전체 시뮬레이션을 실행하세요...</div>
        </div>
    </div>

    <script>
        // 호감도 슬라이더
        const slider = document.getElementById('affection-slider');
        const valueDisplay = document.getElementById('affection-value');
        const affectionInfo = document.getElementById('affection-info');

        slider.addEventListener('input', (e) => {
            const value = parseInt(e.target.value);
            valueDisplay.textContent = value;
            updateAffectionInfo(value);
        });

        function updateAffectionInfo(affection) {
            let toneLevel, toneName, interval, photoType;

            // 톤 레벨 계산
            if (affection <= 2) {
                toneLevel = 1;
                toneName = '존댓말 (정중)';
            } else if (affection <= 4) {
                toneLevel = 2;
                toneName = '반말 (친근)';
            } else if (affection <= 6) {
                toneLevel = 3;
                toneName = '애교 (친밀)';
            } else if (affection <= 8) {
                toneLevel = 4;
                toneName = '애정표현 (특별)';
            } else {
                toneLevel = 5;
                toneName = '적극적 (깊은 사랑)';
            }

            // 연락 주기 계산
            if (affection === 0) {
                interval = '∞ (연락 중지)';
            } else if (affection <= 2) {
                interval = '60분';
            } else if (affection <= 4) {
                interval = '45분';
            } else if (affection <= 6) {
                interval = '30분';
            } else if (affection <= 8) {
                interval = '20분';
            } else {
                interval = '10분';
            }

            // 사진 카테고리
            if (affection < 3) {
                photoType = '❌ 사진 전송 없음';
            } else if (affection < 5) {
                photoType = '📷 Daily (일상 사진)';
            } else if (affection < 7) {
                photoType = '🌟 Special (특별한 순간)';
            } else {
                photoType = '💝 Intimate (친밀한 사진)';
            }

            affectionInfo.innerHTML = `
<span class="status-badge info">호감도 ${affection}</span>
<span class="status-badge success">톤 레벨 ${toneLevel}</span>

📊 시스템 상태:
━━━━━━━━━━━━━━━━━━━━━━
🎨 톤 변화: ${toneName}
📸 사진 전송: ${photoType}
💌 연락 주기: ${interval}
            `.trim();
        }

        // Phase 2-A: 톤 변화 테스트
        function testToneChange() {
            const affection = parseInt(slider.value);
            const result = document.getElementById('tone-result');

            let toneLevel, examples;

            if (affection <= 2) {
                toneLevel = 1;
                examples = [
                    '안녕하세요~ 오늘 날씨 좋네요!',
                    '그렇게 생각하세요? 재미있어요.',
                    '좋은 하루 보내세요!'
                ];
            } else if (affection <= 4) {
                toneLevel = 2;
                examples = [
                    '오빠 안녕! 오늘 뭐해?',
                    '그래? 나도 그렇게 생각해.',
                    '좋은 하루 보내!'
                ];
            } else if (affection <= 6) {
                toneLevel = 3;
                examples = [
                    '오빠~ 오늘 보고싶었어~',
                    '정말? 너무 좋아아!',
                    '오빠 최고야~ ㅎㅎ'
                ];
            } else if (affection <= 8) {
                toneLevel = 4;
                examples = [
                    '오빠♡ 오늘도 생각났어',
                    '진짜 좋아해♥ 알지?',
                    '오빠랑 있으면 너무 행복해♡'
                ];
            } else {
                toneLevel = 5;
                examples = [
                    '오빠 사랑해! 너무너무 보고싶어!',
                    '우리 영원히 함께하자! 사랑해♥♥',
                    '오빠 없으면 안 돼! 정말 사랑해!!'
                ];
            }

            result.innerHTML = `
<span class="status-badge success">톤 레벨 ${toneLevel}</span>
<span class="status-badge info">호감도 ${affection}</span>

📝 예시 메시지:

${examples.map((msg, idx) => `${idx + 1}. "${msg}"`).join('\n')}

✨ 특징:
${getToneCharacteristics(toneLevel)}
            `.trim();
        }

        function getToneCharacteristics(level) {
            const chars = {
                1: '- 존댓말 사용 (~요, ~해요)\n- 정중한 표현\n- 이모티콘 절제',
                2: '- 반말 사용 (~야, ~해)\n- 친근한 표현\n- 가벼운 이모티콘',
                3: '- 애교 섞인 말투 (~해~, 좋아아)\n- 늘임말 사용\n- 많은 이모티콘',
                4: '- 애정 표현 (♡, ♥)\n- 감정 직접 표현\n- 하트 이모티콘',
                5: '- 강한 애정 표현\n- 적극적인 사랑 고백\n- 다양한 하트 사용'
            };
            return chars[level];
        }

        function generateSampleMessage() {
            const affection = parseInt(slider.value);
            const messages = [
                "오늘 날씨 정말 좋네요!",
                "오늘 뭐 했어?",
                "보고싶었어",
                "생각나서 연락했어",
                "오늘 하루 어땠어?"
            ];

            const randomMsg = messages[Math.floor(Math.random() * messages.length)];
            let transformed;

            if (affection <= 2) {
                transformed = randomMsg + "요~ 😊";
            } else if (affection <= 4) {
                transformed = randomMsg + "! ㅎㅎ";
            } else if (affection <= 6) {
                transformed = randomMsg + "~~ 😘";
            } else if (affection <= 8) {
                transformed = randomMsg + "♡ 오빠";
            } else {
                transformed = randomMsg + "!! 너무너무 ♥♥";
            }

            const result = document.getElementById('tone-result');
            const messageBox = document.createElement('div');
            messageBox.className = 'message-box character';
            messageBox.innerHTML = `
💬 <strong>캐릭터 메시지:</strong><br>
"${transformed}"
            `;
            result.innerHTML = '';
            result.appendChild(messageBox);
        }

        // Phase 2-B: 사진 전송 테스트
        function testPhotoSend() {
            const affection = parseInt(slider.value);
            const result = document.getElementById('photo-result');

            if (affection < 3) {
                result.innerHTML = `
<span class="status-badge warning">호감도 부족</span>

❌ 사진 전송 불가
━━━━━━━━━━━━━━━━━━━━━━
현재 호감도: ${affection}
필요 호감도: 3 이상

💡 호감도를 올려서 사진을 받아보세요!
                `.trim();
                return;
            }

            let category, photos, description;

            if (affection < 5) {
                category = 'Daily';
                photos = ['cafe_selfie.jpg', 'study_room.jpg', 'walk_park.jpg'];
                description = '일상적인 순간을 공유합니다';
            } else if (affection < 7) {
                category = 'Special';
                photos = ['birthday_cake.jpg', 'concert_night.jpg', 'beautiful_sunset.jpg'];
                description = '특별한 순간을 함께합니다';
            } else {
                category = 'Intimate';
                photos = ['close_smile.jpg', 'heart_pose.jpg', 'thinking_of_you.jpg'];
                description = '친밀한 마음을 전합니다';
            }

            const selectedPhoto = photos[Math.floor(Math.random() * photos.length)];

            result.innerHTML = `
<span class="status-badge success">사진 전송!</span>
<span class="status-badge info">${category}</span>

📸 전송된 사진
━━━━━━━━━━━━━━━━━━━━━━
파일명: ${selectedPhoto}
카테고리: ${category}
설명: ${description}

💬 함께 보낸 메시지:
"${getPhotoMessage(affection, category)}"

🎯 현재 호감도: ${affection}
            `.trim();
        }

        function getPhotoMessage(affection, category) {
            const messages = {
                'Daily': [
                    '오늘 카페에서~ 생각나서 찍었어!',
                    '공부하다가 쉬는 중! ㅎㅎ',
                    '산책하는데 날씨 좋다~'
                ],
                'Special': [
                    '오늘 정말 특별한 날이야! 같이 있고 싶었어♡',
                    '이 순간을 오빠랑 공유하고 싶었어~',
                    '너무 예뻐서 찍었어! 어때?'
                ],
                'Intimate': [
                    '오빠 생각하면서 찍었어♥ 보고싶어...',
                    '오빠만 보여줄게~ 좋아해♡',
                    '지금 오빠 생각 중... 너무 보고싶어♥♥'
                ]
            };

            const categoryMessages = messages[category];
            return categoryMessages[Math.floor(Math.random() * categoryMessages.length)];
        }

        // Phase 2-C: 먼저 연락 테스트
        function testProactiveContact() {
            const affection = parseInt(slider.value);
            const result = document.getElementById('proactive-result');

            if (affection === 0) {
                result.innerHTML = `
<span class="status-badge warning">연락 중지</span>

❌ 먼저 연락하지 않습니다
━━━━━━━━━━━━━━━━━━━━━━
호감도가 0이 되어 연락을 중단했습니다.

💔 관계가 악화되었습니다.
                `.trim();
                return;
            }

            const intervals = {
                1: 60, 2: 60, 3: 45, 4: 45,
                5: 30, 6: 30, 7: 20, 8: 20,
                9: 10, 10: 10
            };

            const interval = intervals[affection];
            const currentHour = new Date().getHours();
            let timeSlot, messageTemplate;

            if (currentHour < 12) {
                timeSlot = '아침';
                messageTemplate = [
                    '좋은 아침이야! 잘 잤어?',
                    '아침 먹었어? 오늘 하루 화이팅!',
                    '일어났어? 오늘 날씨 좋네~'
                ];
            } else if (currentHour < 18) {
                timeSlot = '오후';
                messageTemplate = [
                    '점심 먹었어? 뭐 먹었어?',
                    '오후에도 힘내! 생각나서~',
                    '지금 뭐해? 바빠?'
                ];
            } else {
                timeSlot = '저녁';
                messageTemplate = [
                    '저녁 먹었어? 오늘 하루 어땠어?',
                    '퇴근했어? 수고했어!',
                    '오늘 하루도 고생했어~ 푹 쉬어!'
                ];
            }

            const message = messageTemplate[Math.floor(Math.random() * messageTemplate.length)];

            result.innerHTML = `
<span class="status-badge success">먼저 연락!</span>
<span class="status-badge info">${timeSlot} 메시지</span>

💌 캐릭터가 먼저 연락했습니다
━━━━━━━━━━━━━━━━━━━━━━
연락 주기: ${interval}분마다
시간대: ${timeSlot} (${currentHour}시)

💬 메시지:
"${message}"

⏰ 다음 연락까지: 약 ${interval}분
🎯 현재 호감도: ${affection}
            `.trim();
        }

        function testNoResponseReaction() {
            const affection = parseInt(slider.value);
            const result = document.getElementById('proactive-result');

            const mbtiPatterns = {
                'ENFP': { hours: 3, message: '오빠!! 왜 답 없어?? 😢', change: -1 },
                'INFP': { hours: 6, message: '오빤 바쁜가봐... ㅠㅠ', change: 0 },
                'INTJ': { hours: 12, message: '바쁘신가 보네요. 나중에 연락 주세요.', change: 0 },
                'ESFJ': { hours: 2, message: '혹시 내가 뭘 잘못했나...? 😢', change: -1 }
            };

            const mbti = ['ENFP', 'INFP', 'INTJ', 'ESFJ'][Math.floor(Math.random() * 4)];
            const pattern = mbtiPatterns[mbti];

            result.innerHTML = `
<span class="status-badge warning">무응답 반응</span>
<span class="status-badge info">MBTI: ${mbti}</span>

⏰ ${pattern.hours}시간 무응답
━━━━━━━━━━━━━━━━━━━━━━
MBTI: ${mbti}
인내심: ${pattern.hours}시간

💬 반응 메시지:
"${pattern.message}"

📊 호감도 변화: ${pattern.change >= 0 ? '+' : ''}${pattern.change}
🎯 현재 호감도: ${affection} → ${affection + pattern.change}

💡 MBTI별 반응 시간:
- ENFP: 3시간 (활발형, 빠른 반응)
- ESFJ: 2시간 (친화형, 매우 빠른 반응)
- INFP: 6시간 (감성형, 인내심 있음)
- INTJ: 12시간 (전략형, 매우 인내심 있음)
            `.trim();
        }

        // 전체 통합 시뮬레이션
        function runFullSimulation() {
            const result = document.getElementById('full-result');
            let output = '';
            const startAffection = parseInt(slider.value);

            output += `🚀 전체 시뮬레이션 시작\n`;
            output += `━━━━━━━━━━━━━━━━━━━━━━\n`;
            output += `시작 호감도: ${startAffection}\n\n`;

            // 톤 변화
            let toneLevel;
            if (startAffection <= 2) toneLevel = 1;
            else if (startAffection <= 4) toneLevel = 2;
            else if (startAffection <= 6) toneLevel = 3;
            else if (startAffection <= 8) toneLevel = 4;
            else toneLevel = 5;

            output += `🎨 톤 시스템\n`;
            output += `레벨: ${toneLevel} (${getToneName(toneLevel)})\n`;
            output += `메시지: "${getSampleForTone(toneLevel)}"\n\n`;

            // 사진 전송
            output += `📸 사진 시스템\n`;
            if (startAffection < 3) {
                output += `상태: 호감도 부족 (3 필요)\n\n`;
            } else {
                const photoCategory = startAffection < 5 ? 'Daily' : startAffection < 7 ? 'Special' : 'Intimate';
                output += `카테고리: ${photoCategory}\n`;
                output += `메시지: "${getPhotoMessage(startAffection, photoCategory)}"\n\n`;
            }

            // 먼저 연락
            const intervals = { 1: 60, 2: 60, 3: 45, 4: 45, 5: 30, 6: 30, 7: 20, 8: 20, 9: 10, 10: 10 };
            output += `💌 먼저 연락 시스템\n`;
            if (startAffection === 0) {
                output += `상태: 연락 중지\n\n`;
            } else {
                output += `연락 주기: ${intervals[startAffection]}분\n`;
                output += `무응답 반응: MBTI별 차이\n\n`;
            }

            output += `━━━━━━━━━━━━━━━━━━━━━━\n`;
            output += `✅ 모든 시스템 정상 작동 중`;

            result.textContent = output;
        }

        function getToneName(level) {
            const names = ['', '존댓말', '반말', '애교', '애정표현', '적극적'];
            return names[level];
        }

        function getSampleForTone(level) {
            const samples = [
                '',
                '오늘 날씨 정말 좋네요!',
                '오빠 오늘 뭐해?',
                '오빠~ 보고싶었어~',
                '오빠♡ 생각났어',
                '오빠 사랑해!! 너무너무 보고싶어!!'
            ];
            return samples[level];
        }

        function resetAll() {
            slider.value = 5;
            valueDisplay.textContent = 5;
            updateAffectionInfo(5);
            document.getElementById('tone-result').textContent = '호감도를 조절하고 버튼을 클릭하세요...';
            document.getElementById('photo-result').textContent = '호감도 3 이상에서 사진을 전송합니다...';
            document.getElementById('proactive-result').textContent = '호감도별 연락 주기를 확인하세요...';
            document.getElementById('full-result').textContent = '전체 시뮬레이션을 실행하세요...';
        }

        // 초기화
        updateAffectionInfo(5);
    </script>
</body>
</html>
