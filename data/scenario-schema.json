{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Romantic Messenger Scenario Schema",
  "description": "ë¡œë§¨í‹± ë©”ì‹ ì € ëŒ€í™” ì‹œë‚˜ë¦¬ì˜¤ í…œí”Œë¦¿ ìŠ¤í‚¤ë§ˆ - ìºë¦­í„° ë³€ìˆ˜ ì¹˜í™˜ ì§€ì›",
  "version": "1.0.0",

  "definitions": {
    "metadata": {
      "type": "object",
      "required": ["title", "genre", "sexy_level", "tags"],
      "properties": {
        "title": {
          "type": "string",
          "description": "ì‹œë‚˜ë¦¬ì˜¤ ì œëª©",
          "example": "ëŠ¦ì€ ë°¤ì˜ ê³ ë°±"
        },
        "genre": {
          "type": "string",
          "enum": ["sensual_romance", "sweet_romance", "passionate_love", "playful_flirt", "emotional_connection"],
          "description": "ì‹œë‚˜ë¦¬ì˜¤ ì¥ë¥´"
        },
        "sexy_level": {
          "type": "integer",
          "minimum": 1,
          "maximum": 10,
          "description": "ì„¹ì‹œ/ì•¼í•œ ì •ë„ (1=ìˆœìˆ˜ 10=ì•¼í•¨)"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "ì‹œë‚˜ë¦¬ì˜¤ íƒœê·¸ (ê²€ìƒ‰ìš©)",
          "example": ["ìˆ ", "ê³ ë°±", "ë©”ì‹ ì €", "ë°¤"]
        },
        "estimated_duration": {
          "type": "string",
          "description": "ì˜ˆìƒ í”Œë ˆì´ ì‹œê°„",
          "example": "5-10ë¶„"
        }
      }
    },

    "choice_template": {
      "type": "object",
      "required": ["text_template", "affection_range", "tone"],
      "properties": {
        "text_template": {
          "type": "string",
          "description": "ì„ íƒì§€ í…ìŠ¤íŠ¸ (ë³€ìˆ˜ ì¹˜í™˜ ê°€ëŠ¥)",
          "example": "${char_name}ì—ê²Œ ë‹¤ê°€ê°„ë‹¤"
        },
        "affection_range": {
          "type": "string",
          "enum": ["negative", "neutral", "low", "medium", "high", "critical"],
          "description": "í˜¸ê°ë„ ë²”ìœ„ (negative: -5~-1, neutral: 0, low: 1-3, medium: 4-6, high: 7-10, critical: 11-15)"
        },
        "tone": {
          "type": "string",
          "enum": ["caring", "playful", "passionate", "respectful", "bold", "gentle"],
          "description": "ì„ íƒì§€ í†¤"
        },
        "next_beat_hint": {
          "type": "string",
          "description": "ë‹¤ìŒ Beatìœ¼ë¡œì˜ ì „í™˜ íŒíŠ¸ (ì„ íƒì‚¬í•­)",
          "example": "confession_response"
        }
      }
    },

    "beat_template": {
      "type": "object",
      "required": ["beat_number", "beat_type", "template"],
      "properties": {
        "beat_number": {
          "type": "integer",
          "minimum": 1,
          "description": "Beat ë²ˆí˜¸ (Act ë‚´ì—ì„œ ìˆœì°¨ì )"
        },
        "beat_type": {
          "type": "string",
          "enum": ["introduction", "flirtation", "confession", "response", "escalation", "resolution"],
          "description": "Beat ìœ í˜•"
        },
        "template": {
          "type": "object",
          "required": ["npc_dialogue_template", "narration_template", "choice_templates"],
          "properties": {
            "npc_dialogue_template": {
              "type": "string",
              "description": "NPC(ìºë¦­í„°) ëŒ€ì‚¬ í…œí”Œë¦¿ - ë³€ìˆ˜ ì¹˜í™˜ë¨",
              "example": "${char_name}: ì˜¤ë¹ ... ì–´ì œ ìˆ  ë§ˆì‹œê³  í•œ ë§ ê¸°ì–µë‚˜? ğŸ˜³"
            },
            "narration_template": {
              "type": "string",
              "description": "ìƒí™© ì„¤ëª… í…ìŠ¤íŠ¸ í…œí”Œë¦¿",
              "example": "${char_name}(ì´)ê°€ ë¶€ë„ëŸ¬ì›Œí•˜ë©° ë©”ì‹œì§€ë¥¼ ë³´ë‚¸ë‹¤."
            },
            "choice_templates": {
              "type": "array",
              "minItems": 2,
              "maxItems": 4,
              "items": {
                "$ref": "#/definitions/choice_template"
              },
              "description": "ì„ íƒì§€ í…œí”Œë¦¿ ëª©ë¡ (ìµœì†Œ 2ê°œ, ìµœëŒ€ 4ê°œ)"
            },
            "emotion_hint": {
              "type": "string",
              "description": "ìºë¦­í„° ê°ì • íŒíŠ¸ (ì„ íƒì‚¬í•­)",
              "example": "ë¶€ë„ëŸ¬ì›€, ì„¤ë ˜"
            }
          }
        }
      }
    },

    "act": {
      "type": "object",
      "required": ["act_number", "beats"],
      "properties": {
        "act_number": {
          "type": "integer",
          "minimum": 1,
          "description": "Act ë²ˆí˜¸ (ìˆœì°¨ì )"
        },
        "act_title": {
          "type": "string",
          "description": "Act ì œëª© (ì„ íƒì‚¬í•­)",
          "example": "ì–´ìƒ‰í•œ ì•„ì¹¨ ì¸ì‚¬"
        },
        "beats": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/beat_template"
          },
          "description": "Beat ëª©ë¡"
        }
      }
    },

    "compatibility": {
      "type": "object",
      "required": ["mbti_best_fit"],
      "properties": {
        "mbti_best_fit": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["INFP", "ENFP", "INTJ", "ENTJ", "INFJ", "ENFJ", "INTP", "ENTP", "ISFP", "ESFP", "ISTP", "ESTP", "ISFJ", "ESFJ", "ISTJ", "ESTJ"]
          },
          "description": "ìµœì  MBTI íƒ€ì… ëª©ë¡"
        },
        "personality_requirements": {
          "type": "object",
          "properties": {
            "min_sexual_comfort": {
              "type": "integer",
              "minimum": 1,
              "maximum": 10,
              "description": "ìµœì†Œ ì„±ì  í¸ì•ˆí•¨ (character.appeal_profile.sexual_comfort)"
            },
            "min_confidence": {
              "type": "integer",
              "minimum": 1,
              "maximum": 10,
              "description": "ìµœì†Œ ìì‹ ê° (character.appeal_profile.confidence_level)"
            },
            "required_hobbies": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "í•„ìˆ˜ ì·¨ë¯¸ (ì„ íƒì‚¬í•­)"
            }
          }
        }
      }
    }
  },

  "type": "object",
  "required": ["id", "metadata", "structure", "compatibility"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z0-9_]+$",
      "description": "ì‹œë‚˜ë¦¬ì˜¤ ê³ ìœ  ID (ì†Œë¬¸ì, ìˆ«ì, ì–¸ë”ìŠ¤ì½”ì–´ë§Œ)",
      "example": "late_night_confession_v1"
    },
    "metadata": {
      "$ref": "#/definitions/metadata"
    },
    "structure": {
      "type": "object",
      "required": ["acts"],
      "properties": {
        "acts": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/act"
          },
          "description": "Act ëª©ë¡ (ìµœì†Œ 1ê°œ)"
        }
      }
    },
    "compatibility": {
      "$ref": "#/definitions/compatibility"
    },
    "variables": {
      "type": "object",
      "description": "ì‚¬ìš© ê°€ëŠ¥í•œ í…œí”Œë¦¿ ë³€ìˆ˜ ëª©ë¡ (ë¬¸ì„œìš©)",
      "example": {
        "${char_name}": "character.basic_info.name",
        "${char_age}": "character.basic_info.age",
        "${char_mbti}": "character.basic_info.mbti",
        "${char_style}": "character.physical_allure.appearance.style",
        "${char_hobby}": "character.appeal_profile.hobbies[0]",
        "${user_name}": "gameState.userName",
        "${affection}": "gameState.affection",
        "${time_of_day}": "context.timeOfDay"
      }
    }
  },

  "examples": [
    {
      "id": "late_night_confession_v1",
      "metadata": {
        "title": "ëŠ¦ì€ ë°¤ì˜ ê³ ë°±",
        "genre": "sensual_romance",
        "sexy_level": 6,
        "tags": ["ìˆ ", "ê³ ë°±", "ë©”ì‹ ì €", "ë°¤"],
        "estimated_duration": "5-7ë¶„"
      },
      "structure": {
        "acts": [
          {
            "act_number": 1,
            "act_title": "ì–´ìƒ‰í•œ ì•„ì¹¨ ì¸ì‚¬",
            "beats": [
              {
                "beat_number": 1,
                "beat_type": "introduction",
                "template": {
                  "npc_dialogue_template": "${char_name}: ì˜¤ë¹ ... ì–´ì œ ìˆ  ë§ˆì‹œê³  í•œ ë§ ê¸°ì–µë‚˜? ğŸ˜³",
                  "narration_template": "${char_name}(ì´)ê°€ ë¶€ë„ëŸ¬ì›Œí•˜ë©° ë©”ì‹œì§€ë¥¼ ë³´ë‚¸ë‹¤.",
                  "choice_templates": [
                    {
                      "text_template": "ê¸°ì–µ ì•ˆ ë‚œë‹¤ê³  ì†”ì§í•˜ê²Œ ë§í•œë‹¤",
                      "affection_range": "neutral",
                      "tone": "respectful"
                    },
                    {
                      "text_template": "\"ë¬´ìŠ¨ ë§ í–ˆëŠ”ë°?\" ì¥ë‚œìŠ¤ëŸ½ê²Œ ë¬»ëŠ”ë‹¤",
                      "affection_range": "low",
                      "tone": "playful"
                    },
                    {
                      "text_template": "\"ë‹¤ ê¸°ì–µí•´... ë„ˆë„ ì§„ì‹¬ì´ì—ˆì–´?\" ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ë¬»ëŠ”ë‹¤",
                      "affection_range": "high",
                      "tone": "caring"
                    }
                  ],
                  "emotion_hint": "ë¶€ë„ëŸ¬ì›€, ì„¤ë ˜"
                }
              }
            ]
          }
        ]
      },
      "compatibility": {
        "mbti_best_fit": ["INFP", "ENFP", "ISFJ"],
        "personality_requirements": {
          "min_sexual_comfort": 5,
          "min_confidence": 3
        }
      }
    }
  ]
}
